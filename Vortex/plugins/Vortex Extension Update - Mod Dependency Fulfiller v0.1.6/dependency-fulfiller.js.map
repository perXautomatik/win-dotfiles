{"version":3,"sources":["webpack://dependency-fulfiller/webpack/bootstrap","webpack://dependency-fulfiller/D:/Projects/awtsegsdg/node_modules/nanoid/format.browser.js","webpack://dependency-fulfiller/D:/Projects/awtsegsdg/node_modules/shortid/index.js","webpack://dependency-fulfiller/D:/Projects/awtsegsdg/node_modules/shortid/lib/alphabet.js","webpack://dependency-fulfiller/D:/Projects/awtsegsdg/node_modules/shortid/lib/build.js","webpack://dependency-fulfiller/D:/Projects/awtsegsdg/node_modules/shortid/lib/generate.js","webpack://dependency-fulfiller/D:/Projects/awtsegsdg/node_modules/shortid/lib/index.js","webpack://dependency-fulfiller/D:/Projects/awtsegsdg/node_modules/shortid/lib/is-valid.js","webpack://dependency-fulfiller/D:/Projects/awtsegsdg/node_modules/shortid/lib/random/random-byte-browser.js","webpack://dependency-fulfiller/D:/Projects/awtsegsdg/node_modules/shortid/lib/random/random-from-seed.js","webpack://dependency-fulfiller/D:/Projects/awtsegsdg/node_modules/shortid/lib/util/cluster-worker-id-browser.js","webpack://dependency-fulfiller/./src/actions/persistent.ts","webpack://dependency-fulfiller/./src/actions/session.ts","webpack://dependency-fulfiller/./src/actions/settings.ts","webpack://dependency-fulfiller/./src/common.ts","webpack://dependency-fulfiller/./src/downloader.ts","webpack://dependency-fulfiller/./src/index.ts","webpack://dependency-fulfiller/./src/reducers/persistent.ts","webpack://dependency-fulfiller/./src/reducers/session.ts","webpack://dependency-fulfiller/./src/reducers/settings.ts","webpack://dependency-fulfiller/./src/types.ts","webpack://dependency-fulfiller/./src/util.ts","webpack://dependency-fulfiller/./src/views/ProfileSelectionDialog.tsx","webpack://dependency-fulfiller/./src/views/Settings.tsx","webpack://dependency-fulfiller/./src/views/UrlSubscriber.tsx","webpack://dependency-fulfiller/external \"bluebird\"","webpack://dependency-fulfiller/external \"electron\"","webpack://dependency-fulfiller/external \"lodash\"","webpack://dependency-fulfiller/external \"path\"","webpack://dependency-fulfiller/external \"react\"","webpack://dependency-fulfiller/external \"react-bootstrap\"","webpack://dependency-fulfiller/external \"react-i18next\"","webpack://dependency-fulfiller/external \"react-redux\"","webpack://dependency-fulfiller/external \"redux-act\"","webpack://dependency-fulfiller/external \"timers\"","webpack://dependency-fulfiller/external \"turbowalk\"","webpack://dependency-fulfiller/external \"vortex-api\""],"names":[],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,+CAA+C,UAAU;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvCa;AACb,iBAAiB,mBAAO,CAAC,4DAAa;;;;;;;;;;;;;ACDzB;;AAEb,qBAAqB,mBAAO,CAAC,4FAA2B;;AAExD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtGa;;AAEb,eAAe,mBAAO,CAAC,8DAAY;AACnC,eAAe,mBAAO,CAAC,8DAAY;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;AC7Ca;;AAEb,eAAe,mBAAO,CAAC,8DAAY;AACnC,aAAa,mBAAO,CAAC,0FAAsB;AAC3C,aAAa,mBAAO,CAAC,kEAAe;;AAEpC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACpBa;;AAEb,eAAe,mBAAO,CAAC,8DAAY;AACnC,YAAY,mBAAO,CAAC,wDAAS;AAC7B,cAAc,mBAAO,CAAC,8DAAY;;AAElC;AACA;AACA;AACA;AACA,sBAAsB,mBAAO,CAAC,kGAA0B;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7Da;AACb,eAAe,mBAAO,CAAC,8DAAY;;AAEnC;AACA;AACA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;;AAEA;;;;;;;;;;;;;ACda;;AAEb,8EAA8E;;AAE9E;;AAEA;AACA;AACA;AACA,uBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACpBa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACxBa;;AAEb;;;;;;;;;;;;;;;;ACFA,sEAAyC;AAE5B,gCAAwB,GAAG,wBAAY,CAAC,4BAA4B,EAC/E,CAAC,SAAiB,EAAE,KAAa,EAAE,EAAE,CAAC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;AAEjD,kCAA0B,GAAG,wBAAY,CAAC,8BAA8B,EACrF,CAAC,SAAiB,EAAE,EAAE,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;;;;;;;;;;;;;;;;ACN1C,sEAAyC;AAG5B,4BAAoB,GAC/B,wBAAY,CAAC,yCAAyC,EAAE,CAAC,IAAa,EAAE,EAAE;IACxE,OAAO,IAAI,CAAC;AACd,CAAC,CAAC,CAAC;AAEQ,0BAAkB,GAAG,wBAAY,CAAC,2BAA2B,EACxE,CAAC,WAAkD,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;AAE1D,2BAAmB,GAAG,wBAAY,CAAC,uBAAuB,EACrE,CAAC,QAAgB,EAAE,EAAE,CAAC,QAAQ,CAAC;;;;;;;;;;;;;;;;ACZjC,sEAAyC;AAI5B,kCAA0B,GACrC,wBAAY,CAAC,+BAA+B,EAAE,CAAC,OAAgB,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;AAElE,kBAAU,GACrB,wBAAY,CAAC,4BAA4B,EAAE,CAAC,IAAa,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;AAEzD,0BAAkB,GAC7B,wBAAY,CAAC,yBAAyB,EAAE,CAAC,KAAc,EAAE,EAAE,CAAC,KAAK,CAAC,CAAC;AAExD,8BAAsB,GACjC,wBAAY,CAAC,mCAAmC,EAAE,CAAC,IAAa,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;AAEhE,iBAAS,GACpB,wBAAY,CAAC,aAAa,EAAE,CAAC,MAAe,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;AAE9C,oBAAY,GACvB,wBAAY,CAAC,gBAAgB,EAAE,CAAC,EAAU,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;AAExC,iBAAS,GACpB,wBAAY,CAAC,aAAa,EAAE,CAAC,EAAU,EAAE,MAAe,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;;;;;;;;;;;;;;;;;;;ACvBjF,wEAAwB;AACxB,yEAAkC;AAErB,sBAAc,GAAG,QAAQ,CAAC;AAC1B,gBAAQ,GAAG,cAAc,GAAG,sBAAc,CAAC;AAC3C,sBAAc,GAAG,cAAI,CAAC,IAAI,CAAC,iBAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,sBAAsB,CAAC,CAAC;AAC/E,aAAK,GAAG,mBAAmB,CAAC;AAC5B,sBAAc,GAAG,iCAAiC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;ACPhE,yEAAkE;AAElE,qEAA8D;AAC9D,kEAAsD;AAEtD,SAAS,gBAAgB,CAAC,GAAwB,EAAE,WAAmB;IACrE,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;IAC7B,MAAM,SAAS,GAAwC,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,YAAY,EAAE,WAAW,EAAE,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC;IACrH,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,SAAS,KAAK,WAAW,CAAC,CAAC;IAChG,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,KAAK,EAAE,CAAC;AAC1C,CAAC;AAED,SAAsB,OAAO,CAAC,GAAwB,EACxB,YAAgC,EAChC,UAAkB;;;QAC9C,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;QAC7B,IAAI,YAAY,CAAC,gBAAgB,IAAI,YAAK,CAAC,QAAQ,CAAC,UAAU,0CAAG,SAAS,OAAM,IAAI,EAAE;YACpF,MAAM,MAAM,GAAG,wBAAiB,CAAC,YAAY,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YAClE,MAAM,SAAS,GAAG,sBAAS,CAAC,wBAAwB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;YACpE,MAAM,IAAI,GACR,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,YAAY,EAAE,MAAM,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;YAC1D,MAAM,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,WACtC,kBAAI,CAAC,EAAE,CAAC,CAAC,UAAU,0CAAE,MAAM,MAAK,YAAY,CAAC,WAAW,CAAC,MAAM,IAAC,CAAC;YACnE,IAAI,CAAC,GAAG,EAAE;gBACR,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;oBACrC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,wBAAwB,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE;wBACzE,IAAI,GAAG,EAAE;4BACP,gBAAG,CAAC,OAAO,EAAE,8BAA8B,EAAE,GAAG,CAAC,CAAC;4BAClD,OAAO,OAAO,CAAC,SAAS,CAAC,CAAC;yBAC3B;wBAED,IAAI,YAAY,CAAC,eAAe,IAAI,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,KAAK,IAAI,EAAE;4BAC7E,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,oBAAO,CAAC,aAAa,CAAC,SAAS,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;yBACnE;wBACD,OAAO,OAAO,CAAC,KAAK,CAAC,CAAC;oBACxB,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;aACJ;iBAAM;gBACL,IAAI,YAAY,CAAC,eAAe,IAAI,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,KAAK,IAAI,EAAE;oBAC7E,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,oBAAO,CAAC,aAAa,CAAC,SAAS,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;iBACjE;gBACD,OAAO,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;aAC7B;SACF;QAED,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;;CACnC;AAlCD,0BAkCC;AAED,SAAsB,YAAY,CAAC,GAAwB,EACxB,YAAgC,EAChC,QAAwC;;QACzE,MAAM,EAAE,WAAW,EAAE,WAAW,EAAE,gBAAgB,EAAE,GAAG,YAAY,CAAC;QACpE,IAAI,CAAC,gBAAS,CAAC,GAAG,CAAC,EAAE;YACnB,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,uBAAe,EAAE,CAAC,CAAC;SAC9C;QACD,IAAI,QAAQ,EAAE;YACZ,QAAQ,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;SACpC;QACD,IAAI,gBAAgB,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC,UAAU,KAAK,SAAS,EAAE;YAC/D,MAAM,EAAE,UAAU,EAAE,GAAG,gBAAgB,CAAC,GAAG,EAAE,YAAY,CAAC,WAAW,CAAC,CAAC;YACvE,OAAO,CAAC,GAAG,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;YACvC,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;SAC1B;QAED,OAAO,GAAG,CAAC,YAAY,CAAC,gBAAgB,EAAE,wBAAiB,CAAC,WAAW,CAAC,MAAM,CAAC,EAC7E,WAAW,CAAC,KAAK,EAAE,WAAW,CAAC,MAAM,EAAE,WAAW,EAAE,gBAAgB,CAAC;aACpE,IAAI,CAAC,GAAG,EAAE;YACT,MAAM,EAAE,UAAU,EAAE,GAAG,gBAAgB,CAAC,GAAG,EAAE,YAAY,CAAC,WAAW,CAAC,CAAC;YACvE,OAAO,CAAC,GAAG,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;YACvC,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;QAC3B,CAAC,CAAC;aACD,KAAK,CAAC,GAAG,CAAC,EAAE;YACX,gBAAG,CAAC,OAAO,EAAE,uCAAuC,EAClD,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;YAC9C,GAAG,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC;YAChC,GAAG,CAAC,qBAAqB,CAAC,+BAA+B,EAAE,GAAG,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC;IACP,CAAC;CAAA;AA7BD,oCA6BC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7ED,mEAAqC;AACrC,oEAA4B;AAC5B,mEAA6B;AAC7B,6DAAoC;AACpC,uFAA8C;AAC9C,yEAAsE;AACtE,2FAAkG;AAClG,8FAA4D;AAC5D,wEAA2F;AAC3F,oFAAqD;AACrD,uHAAsD;AACtD,8GAAgD;AAChD,iHAAkD;AAClD,qEAEoD;AACpD,kEACyE;AACzE,sJAAoE;AACpE,4GAAwC;AAIxC,MAAM,UAAU,GAAG,KAAK,GAAG,CAAC,CAAC;AAE7B,SAAS,IAAI,CAAC,OAAgC;IAC5C,OAAO,CAAC,eAAe,CAAC,CAAC,UAAU,EAAE,WAAW,CAAC,EAAE,kBAAe,CAAC,CAAC;IACpE,OAAO,CAAC,eAAe,CAAC,CAAC,SAAS,EAAE,cAAc,CAAC,EAAE,iBAAc,CAAC,CAAC;IACrE,OAAO,CAAC,eAAe,CAAC,CAAC,YAAY,EAAE,cAAc,CAAC,EAAE,oBAAiB,CAAC,CAAC;IAE3E,OAAO,CAAC,cAAc,CAAC,mBAAmB,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,EAAE,qBAAqB,EACjF,WAAW,CAAC,EAAE,GAAG,qBAAqB,CAAC,OAAO,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAEvE,OAAO,CAAC,cAAc,CAAC,uBAAuB,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,EAAE,qBAAqB,EACrF,WAAW,CAAC,EAAE,GAAG,qBAAqB,CAAC,OAAO,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAEvE,OAAO,CAAC,cAAc,CAAC,WAAW,EAAE,GAAG,EAAE,QAAQ,EAAE,EAAE,EAAE,iCAAiC,EACtF,WAAW,CAAC,EAAE,CAAC,eAAe,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;IAE/C,OAAO,CAAC,cAAc,CAAC,WAAW,EAAE,GAAG,EAAE,QAAQ,EAAE,EAAE,EAAE,+BAA+B,EACpF,WAAW,CAAC,EAAE,GAAG,eAAe,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE;QACrD,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;QACrC,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,oBAAoB,CAAC,EAAE,KAAK,CAAC,CAAC;IACrF,CAAC,CAAC,CAAC;IAEL,OAAO,CAAC,cAAc,CAAC,WAAW,EAAE,GAAG,EAAE,QAAQ,EAAE,EAAE,EAAE,0BAA0B,EAC/E,WAAW,CAAC,EAAE,GAAG,mBAAmB,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE;QACzD,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;QACrC,MAAM,OAAO,GAAG,sBAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC/C,IAAI,QAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,EAAE,MAAK,SAAS,EAAE;YAC7B,OAAO,KAAK,CAAC;SACd;QACD,MAAM,KAAK,GAAG,iBAAI,CAAC,OAAO,CAAC,KAAK,EAC9B,CAAC,YAAY,EAAE,cAAc,EAAE,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,OAAO,KAAK,KAAK,MAAM,IAAI,KAAK,KAAK,SAAS,CAAC;IACjD,CAAC,CAAC,CAAC;IAEL,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,kBAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC;IAE1E,OAAO,CAAC,cAAc,CAAC,oCAAoC,EAAE,gCAAsB,EAAE,GAAG,EAAE,CAAC,CAAC;QAC1F,eAAe,EAAE,CAAC,WAAyB,EAAE,EAAE,CAAC,eAAe,CAAC,OAAO,CAAC,GAAG,EAAE,WAAW,CAAC;KAC1F,CAAC,CAAC,CAAC;IAEJ,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE;QAChB,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,YAAY,EAAE,MAAM,CAAC,EAC9C,CAAC,IAAI,EAAE,OAAO,EAAE,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;IACjE,CAAC,CAAC,CAAC;IAEH,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAe,mBAAmB,CAAC,GAAwB;;QACzD,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;QAC7B,MAAM,OAAO,GAAG,sBAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC/C,MAAM,KAAK,GAAG,iBAAI,CAAC,OAAO,CAAC,KAAK,EAC9B,CAAC,YAAY,EAAE,cAAc,EAAE,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,IAAI,KAAK,KAAK,MAAM,EAAE;YACpB,OAAO;SACR;QACD,MAAM,IAAI,GAAc,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,kBAAkB,CAAC,EAAE,EAAE,CAAC,CAAC;QAC/F,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC;QACxD,IAAI;YACF,MAAM,sBAAe,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;YACxC,MAAM,eAAe,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,uBAAc,EAAE,iBAAQ,CAAC,CAAC,CAAC;YAChE,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,oBAAO,CAAC,sBAAsB,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;SAC1E;QAAC,OAAO,GAAG,EAAE;YACZ,GAAG,CAAC,qBAAqB,CAAC,oCAAoC,EAAE,GAAG,CAAC,CAAC;SACtE;IACH,CAAC;CAAA;AAED,SAAe,eAAe,CAAC,GAAwB,EAAE,WAAyB;;;QAChF,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;QAC7B,MAAM,QAAQ,GAAG,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,cAAc,EAAE,kBAAkB,CAAC,EAAE,SAAS,CAAC,CAAC;QACjG,IAAI,QAAQ,KAAK,SAAS,EAAE;YAC1B,GAAG,CAAC,qBAAqB,CAAC,2BAA2B,EAAE,IAAI,iBAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC5F,OAAO;SACR;QAED,IAAI;YACF,MAAM,IAAI,GAAG,MAAM,eAAE,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC;YACpE,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAClC,UAAU,GAAG,UAAU,CAAC,UAAU,KAAK,SAAS;gBAC9C,CAAC,CAAC,UAAU,CAAC,UAAU;gBACvB,CAAC,CAAC,UAAU,CAAC;YACf,IAAI,UAAU,CAAC,SAAS,CAAC,KAAK,KAAK,SAAS;mBACxC,iBAAU,CAAC,IAAI,0CAAG,WAAW,CAAC,MAAM,OAAM,SAAS;mBACnD,UAAU,CAAC,QAAQ,KAAK,SAAS,EAAE;gBACrC,MAAM,IAAI,iBAAI,CAAC,WAAW,CAAC,8CAA8C,CAAC,CAAC;aAC5E;YAED,MAAM,cAAc,GAAyB,EAAE,CAAC;YAChD,MAAM,IAAI,GAAiB,WAAW,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAC/D,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,SAAS,CAAC,CAAC;YAC/E,MAAM,QAAQ,GAAwB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBACrD,KAAK,EAAE,GAAG,CAAC,EAAE;gBACb,SAAS,EAAE,GAAG,CAAC,SAAS;gBACxB,KAAK,EAAE,GAAG,CAAC,KAAK,IAAI,EAAE;aACvB,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC;YAEvD,MAAM,cAAc,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACtD,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;gBAC9B,MAAM,KAAK,GAAW,OAAO,CAAC,SAAS,CAAC;gBACxC,MAAM,GAAG,GAAiB,iBAAU,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;gBACxE,IAAI,GAAG,KAAK,SAAS,IAAI,iBAAU,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,0CAAE,SAAS,MAAK,SAAS,EAAE;oBACnF,IAAI,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,SAAS,EAAE;wBACnD,gBAAG,CAAC,MAAM,EAAE,wCAAwC,EAClD,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;qBACtD;yBAAM;wBACL,gBAAG,CAAC,MAAM,EAAE,mEAAmE,EAAE,KAAK,CAAC,CAAC;qBACzF;oBACD,SAAS;iBACV;gBAED,MAAM,aAAa,GAAuB;oBACxC,WAAW,EAAE,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,SAAS;oBACxD,WAAW,EAAE,GAAG;oBAChB,gBAAgB,EAAE,IAAI;oBACtB,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CACjC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;iBAC9C,CAAC;gBACF,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aACpC;YAED,MAAM,mBAAmB,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;YAC/C,GAAG,CAAC,gBAAgB,CAAC;gBACnB,OAAO,EAAE,4BAA4B;gBACrC,IAAI,EAAE,SAAS;gBACf,EAAE,EAAE,4BAA4B;gBAChC,SAAS,EAAE,IAAI;aAChB,CAAC,CAAC;YACH,sBAAsB,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;SAC7C;QAAC,OAAO,GAAG,EAAE;YACZ,GAAG,CAAC,qBAAqB,CAAC,gDAAgD,EAAE,GAAG,EAC7E,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;SAC3B;;CACF;AAED,SAAe,eAAe,CAAC,GAAwB;;QACrD,MAAM,YAAY,GAAG,MAAM,GAAG,CAAC,UAAU,CAAC;YACxC,KAAK,EAAE,sBAAsB;YAC7B,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC;SACvD,CAAC,CAAC;QAEH,IAAI,YAAY,KAAK,SAAS,EAAE;YAE9B,OAAO;SACR;QACD,IAAI;YACF,MAAM,IAAI,GAAG,MAAM,eAAE,CAAC,aAAa,CAAC,YAAY,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC;YACxE,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAClC,UAAU,GAAG,UAAU,CAAC,UAAU,KAAK,SAAS;gBAC9C,CAAC,CAAC,UAAU,CAAC,UAAU;gBACvB,CAAC,CAAC,UAAU,CAAC;YACf,IAAI,UAAU,CAAC,SAAS,KAAK,SAAS;mBAClC,UAAU,CAAC,IAAI,KAAK,SAAS;mBAC7B,UAAU,CAAC,QAAQ,KAAK,SAAS,EAAE;gBACrC,MAAM,IAAI,iBAAI,CAAC,WAAW,CAAC,8CAA8C,CAAC,CAAC;aAC5E;YAED,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,6BAAmB,CAAC,YAAY,CAAC,CAAC,CAAC;YACtD,MAAM,WAAW,GACf,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE;gBACxD,MAAM,OAAO,GAAG,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAC1C,MAAM,QAAQ,GAAG,iBAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,UAAU,CAAC,EAAE,EAAE,CAAC,CAAC;gBACzD,KAAK,CAAC,IAAI,CAAC,GAAG;oBACZ,EAAE,EAAE,IAAI;oBACR,MAAM,EAAE,OAAO,CAAC,MAAM;oBACtB,aAAa,EAAE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,iBAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,KAAK,EAAE,SAAS,CAAC,EAAE,KAAK,CAAC,CAAC;iBACxG,CAAC;gBACF,OAAO,KAAK,CAAC;YACf,CAAC,EAAE,EAAE,CAAC,CAAC;YAEP,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,4BAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;YACpD,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,8BAAoB,CAAC,IAAI,CAAC,CAAC,CAAC;SAChD;QAAC,OAAO,GAAG,EAAE;YACZ,GAAG,CAAC,qBAAqB,CAAC,gDAAgD,EAAE,GAAG,EAC7E,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;SAC3B;IACH,CAAC;CAAA;AAED,SAAe,YAAY,CAAC,GAAwB,EAAE,IAAS,EAAE,OAAY;;QAC3E,IAAI,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;QAC3B,MAAM,WAAW,GAAG,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,aAAa,CAAC,EAAE,KAAK,CAAC,CAAC;QACzF,IAAI,CAAC,WAAW,EAAE;YAChB,OAAO;SACR;QAED,MAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACvC,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;YAChC,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,SAAS,EAAE;gBAChC,SAAS;aACV;YACD,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC7C,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;YAChD,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE;gBAClC,MAAM,aAAa,GAAG,sBAAS,CAAC,kBAAkB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;gBACpE,MAAM,kBAAkB,GAAG,CAAO,KAAa,EAAiB,EAAE;oBAChE,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;oBACvB,MAAM,GAAG,GAAe,iBAAI,CAAC,OAAO,CAAC,KAAK,EACxC,CAAC,YAAY,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,CAAC,EAAE,SAAS,CAAC,CAAC;oBACtD,IAAI,IAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,gBAAgB,MAAK,SAAS,EAAE;wBAEvC,gBAAG,CAAC,OAAO,EAAE,uDAAuD,EAAE,KAAK,CAAC,CAAC;wBAC7E,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;qBAC1B;oBAED,IAAI,GAAG,CAAC,KAAK,KAAK,YAAY,EAAE;wBAC9B,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,mBAAU,CAAC,GAAG,EAAE,CAC9C,OAAO,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;qBAC9C;yBAAM,IAAI,GAAG,CAAC,KAAK,KAAK,WAAW,EAAE;wBACpC,MAAM,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,GAAG,CAAC,gBAAgB,CAAC,CAAC;wBACxE,OAAO,cAAc,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;qBAC9C;gBACH,CAAC,EAAC;gBACF,MAAM,IAAI,GAAG,CAAC,CAAC,UAAU,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;gBAC9C,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAM,KAAK,EAAC,EAAE;;oBACvC,gBAAG,CAAC,MAAM,EAAE,wCAAwC,EAAE,KAAK,CAAC,CAAC;oBAC7D,MAAM,mBAAmB,eAAG,OAAO,CAAC,QAAQ,CAAC,0CAAG,KAAK,2CAAG,gBAAgB,CAAC;oBACzE,IAAI,mBAAmB,KAAK,SAAS,EAAE;wBACrC,IAAI;4BACF,MAAM,OAAO,CAAC,IAAI,CAAC;gCACjB,kBAAkB,CAAC,KAAK,CAAC;gCACzB,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,mBAAU,CAAC,GAAG,EAAE;oCACvC,gBAAG,CAAC,OAAO,EAAE,yDAAyD;0CAClE,gCAAgC,EAAE,KAAK,CAAC,CAAC;oCAC7C,OAAO,OAAO,CAAC,SAAS,CAAC,CAAC;gCAC5B,CAAC,EAAE,UAAU,CAAC,CAAC;6BAChB,CAAC,CAAC;yBACJ;wBAAC,OAAO,GAAG,EAAE;4BACZ,gBAAG,CAAC,OAAO,EAAE,qCAAqC,EAAE,GAAG,CAAC,CAAC;yBAC1D;qBACF;gBACH,CAAC,EAAC,CAAC,CAAC;aACL;SACF;IACH,CAAC;CAAA;AAED,SAAS,sBAAsB,CAAC,GAAwB,EAAE,SAA+B;IACvF,MAAM,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CACrC,IAAI,CAAC,KAAK,KAAK,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,SAAS,CAAC;IACnE,IAAI,CAAC,QAAQ,EAAE;QACb,OAAO;KACR;IAED,MAAM,CAAC,GAAG,GAAG,CAAC,SAAS,CAAC;IACxB,GAAG,CAAC,gBAAgB,CAAC;QACnB,EAAE,EAAE,uBAAuB;QAC3B,IAAI,EAAE,MAAM;QACZ,OAAO,EAAE,CAAC,CAAC,gDAAgD,CAAC;QAC5D,aAAa,EAAE,KAAK;QACpB,SAAS,EAAE,KAAK;QAChB,OAAO,EAAE;YACP,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC,CAAC,uBAAuB,CAAC,EAAE;oBAC3F,MAAM,EAAE,CAAC,CAAC,yFAAyF;0BACzF,wFAAwF;0BACxF,8DAA8D,CAAC;iBAC1E,EAAE;oBACD,EAAE,KAAK,EAAE,eAAe,EAAE;oBAC1B;wBACE,KAAK,EAAE,cAAc;wBACrB,MAAM,EAAE,GAAG,EAAE;4BACX,YAAY,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;4BAC7B,OAAO,EAAE,CAAC;wBACZ,CAAC;qBACF;iBACF,CAAC;aACD;SACF;KACF,CAAC,CAAC;AACL,CAAC;AAED,SAAS,YAAY,CAAC,GAAwB,EAAE,SAA+B;;IAC7E,MAAM,KAAK,GAAW,eAAQ,CAAC,GAAG,CAAC,CAAC;IACpC,IAAI,KAAK,KAAK,SAAS,EAAE;QACvB,OAAO;KACR;IAGD,MAAM,OAAO,GAAG,CAAC,IAAoB,EAAE,KAAa,EAAE,EAAE,CACtD,iBAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IAQ3D,MAAM,GAAG,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC1E,MAAM,KAAK,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC;IAC/F,MAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACxD,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;QAChC,IAAI,QAAQ,CAAC,KAAK,KAAK,SAAS,EAAE;YAChC,SAAS;SACV;QAED,KAAK,MAAM,IAAI,IAAI,QAAQ,CAAC,KAAK,EAAE;YACjC,IAAI,SAAS,CAAC,QAAQ,OAAC,IAAI,CAAC,SAAS,0CAAE,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE;gBACvF,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,oBAAO,CAAC,UAAU,CACnC,wBAAiB,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;aACrF;SACF;KACF;AACH,CAAC;AAED,SAAe,mBAAmB,CAAC,GAAwB,EAAE,SAA+B;;QAC1F,MAAM,cAAc,GAAG,SAAS,CAAC,MAAM,CAAC;QACxC,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,MAAM,QAAQ,GAAG,CAAC,WAAmB,EAAE,EAAE;YACvC,GAAG,CAAC,gBAAgB,CAAC;gBACnB,EAAE,EAAE,uBAAc;gBAClB,IAAI,EAAE,UAAU;gBAChB,KAAK,EAAE,mDAAmD;gBAC1D,OAAO,EAAE,WAAW;gBACpB,SAAS,EAAE,IAAI;gBACf,aAAa,EAAE,KAAK;gBACpB,QAAQ,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,cAAc;aACvC,CAAC,CAAC;YACH,EAAE,GAAG,CAAC;QACR,CAAC,CAAC;QAEF,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;YAChC,IAAI;gBACF,MAAM,yBAAY,CAAC,GAAU,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;aACpD;YAAC,OAAO,GAAG,EAAE;gBACZ,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;gBAC7B,IAAI,GAAG,YAAY,uBAAe,EAAE;oBAClC,MAAM,SAAS,GAAG,iBAAI,CAAC,OAAO,CAAC,KAAK,EAClC,CAAC,UAAU,EAAE,WAAW,EAAE,4BAA4B,CAAC,EAAE,KAAK,CAAC,CAAC;oBAClE,IAAI,CAAC,SAAS,EAAE;wBACd,GAAG,CAAC,gBAAgB,CAAC;4BACnB,OAAO,EAAE,2CAA2C;4BACpD,IAAI,EAAE,SAAS;4BACf,EAAE,EAAE,uBAAuB;4BAC3B,OAAO,EAAE;gCACP;oCACE,KAAK,EAAE,MAAM;oCACb,MAAM,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,EAAE,sBAAsB,EAAE;wCAClE,MAAM,EAAE,+DAA+D;8CAC/D,gFAAgF;8CAChF,yEAAyE;8CACzE,6EAA6E;8CAC7E,iEAAiE;8CACjE,2EAA2E;8CAC3E,6EAA6E;8CAC7E,yFAAyF;8CACzF,yFAAyF;8CACzF,6GAA6G;qCACtH,EACD;wCACE;4CACE,KAAK,EAAE,OAAO;4CACd,MAAM,EAAE,GAAG,EAAE;gDACX,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,iCAAsB,CAAC,IAAI,CAAC,CAAC,CAAC;gDACjD,OAAO,EAAE,CAAC;4CACZ,CAAC;yCACF;qCACF,CAAC;iCACH;6BACF;yBACF,CAAC,CAAC;qBACJ;iBACF;qBAAM;oBACL,GAAG,CAAC,qBAAqB,CAAC,2CAA2C,EAAE,GAAG,EACxE,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;iBAC3B;gBAED,MAAM,KAAK,GAAW,eAAQ,CAAC,GAAG,CAAC,CAAC;gBAEpC,IAAI,KAAK,KAAK,SAAS,EAAE;oBACvB,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;wBACtD,MAAM,EAAE,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;wBACjC,IAAI,GAAE,aAAF,EAAE,uBAAF,EAAE,CAAE,SAAS,MAAK,QAAQ,CAAC,WAAW,EAAE;4BAC1C,OAAO,IAAI,CAAC;yBACb;wBACD,MAAM,GAAG,GAAG,iBAAU,CAAC,EAAE,CAAC,CAAC;wBAC3B,OAAO,iBAAU,CAAC,GAAG,EAAE,QAAQ,CAAC,WAAW,CAAC,CAAC;oBAC/C,CAAC,CAAC,CAAC;oBAEH,IAAI,MAAM,KAAK,SAAS,EAAE;wBACxB,MAAM,oBAAO,CAAC,GAAG,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;wBACrC,SAAS;qBACV;iBACF;gBACD,MAAM,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,cAAK,EAAE,QAAQ,CAAC,WAAW,CAAC,MAAM,EACtD,MAAM,EAAE,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;sBAC5C,sBAAsB,QAAQ,CAAC,WAAW,CAAC,MAAM,QAAQ,CAAC;gBAC9D,iBAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;aAClC;SACF;QAED,GAAG,CAAC,mBAAmB,CAAC,uBAAc,CAAC,CAAC;IAC1C,CAAC;CAAA;AAED,SAAS,eAAe,CAAC,GAAwB;IAC/C,MAAM,CAAC,GAAG,GAAG,CAAC,SAAS,CAAC;IACxB,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;IAC7B,MAAM,YAAY,GAAG,sBAAS,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IACnD,MAAM,aAAa,GAAG,sBAAS,CAAC,kBAAkB,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;IACxE,GAAG,CAAC,UAAU,CAAC,UAAU,EAAE,qBAAqB,EAAE;QAChD,MAAM,EAAE,CAAC,CAAC,uEAAuE;cACvE,2FAA2F;cAC3F,6EAA6E;cAC7E,iFAAiF;cACjF,mFAAmF;cACnF,kFAAkF;cAClF,gFAAgF;cAChF,8EAA8E;cAC9E,6FAA6F;cAC7F,0FAA0F;cAC1F,6BAA6B,EACjC,EAAE,OAAO,EAAE,EAAE,MAAM,EAAE,uBAAc,EAAE,EAAE,CAAC;KAC/C,EAAE;QACD,EAAE,KAAK,EAAE,OAAO,EAAE;QAClB,EAAE,KAAK,EAAE,uBAAuB,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,EAAE;QACvE,EAAE,KAAK,EAAE,4BAA4B,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC,GAAG,EAAE,aAAa,CAAC,EAAE;KAC1F,CAAC,CAAC;AACL,CAAC;AAED,SAAe,gBAAgB,CAAC,GAAwB;;QACtD,MAAM,aAAa,GAAG,oBAAS,CAAC,QAAQ,EAAE,CAAC;QAC3C,IAAI;YACF,MAAM,cAAc,GAAyB,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;YACvE,MAAM,mBAAmB,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;YAC/C,GAAG,CAAC,gBAAgB,CAAC;gBACnB,OAAO,EAAE,4BAA4B;gBACrC,IAAI,EAAE,SAAS;gBACf,EAAE,EAAE,4BAA4B;gBAChC,SAAS,EAAE,IAAI;aAChB,CAAC,CAAC;YACH,sBAAsB,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;SAC7C;QAAC,OAAO,GAAG,EAAE;YACZ,GAAG,CAAC,OAAO,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;gBAChD,CAAC,CAAC,8EAA8E;gBAChF,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC;YAChB,GAAG,CAAC,qBAAqB,CAAC,iCAAiC,EAAE,GAAG,EAC9D,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;SAC3B;IACH,CAAC;CAAA;AAED,SAAe,eAAe,CAAC,GAAwB,EAAE,QAAgB;;QACvE,IAAI,kBAAkB,GAAyB,EAAE,CAAC;QAClD,IAAI;YACF,MAAM,IAAI,GAAG,MAAM,eAAE,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC;YACpE,MAAM,UAAU,GAAyB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAC1D,kBAAkB,GAAG,kBAAkB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;SAC5D;QAAC,OAAO,GAAG,EAAE;YACZ,gBAAG,CAAC,OAAO,EAAE,0CAA0C,EAAE,GAAG,CAAC,CAAC;SAC/D;QAED,MAAM,SAAS,GAAG,iBAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,SAAS,CAAC,EAAE,KAAK,CAAC,CAAC;QAC5F,IAAI,SAAS,EAAE;YACb,qBAAc,CAAC,GAAG,CAAC,CAAC;YACpB,kBAAkB,GAAG,kBAAkB,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,iCACnD,QAAQ,KACX,eAAe,EAAE,IAAI,IACrB,CAAC,CAAC;SACL;QACD,MAAM,eAAe,GACnB,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAa,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;aAC3E,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAa,CAAC,CAAC,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAElF,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE;YAChC,OAAO;SACR;QACD,IAAI;YACF,MAAM,mBAAmB,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;YAChD,GAAG,CAAC,gBAAgB,CAAC;gBACnB,OAAO,EAAE,4BAA4B;gBACrC,IAAI,EAAE,SAAS;gBACf,EAAE,EAAE,4BAA4B;gBAChC,SAAS,EAAE,IAAI;aAChB,CAAC,CAAC;YACH,sBAAsB,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;YAC7C,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;SAC1B;QAAC,OAAO,GAAG,EAAE;YACZ,GAAG,CAAC,qBAAqB,CAAC,iCAAiC,EAAE,GAAG,EAC9D,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;SAC3B;IACH,CAAC;CAAA;AAED,SAAe,cAAc,CAAC,GAAwB,EAAE,OAAe;;QACrE,IAAI,YAAY,GAAa,EAAE,CAAC;QAChC,MAAM,mBAAS,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE;YACjC,MAAM,SAAS,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,WAAW;mBACvD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,uBAAc,CAAC,CAAC,CAAC;YAC7D,YAAY,GAAG,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAChD,CAAC,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QAEtB,IAAI,kBAAkB,GAAyB,EAAE,CAAC;QAClD,KAAK,MAAM,QAAQ,IAAI,YAAY,EAAE;YACnC,IAAI;gBACF,MAAM,IAAI,GAAG,MAAM,eAAE,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC;gBAC7E,MAAM,UAAU,GAAyB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;gBAC1D,kBAAkB,GAAG,kBAAkB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;aAC5D;YAAC,OAAO,GAAG,EAAE;gBACZ,gBAAG,CAAC,OAAO,EAAE,0CAA0C,EAAE,GAAG,CAAC,CAAC;gBAC9D,SAAS;aACV;SACF;QAED,MAAM,eAAe,GACnB,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAa,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;aAC3E,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,oBAAa,CAAC,CAAC,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAElF,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE;YAChC,OAAO;SACR;QACD,IAAI;YACF,MAAM,mBAAmB,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;YAChD,GAAG,CAAC,gBAAgB,CAAC;gBACnB,OAAO,EAAE,4BAA4B;gBACrC,IAAI,EAAE,SAAS;gBACf,EAAE,EAAE,4BAA4B;gBAChC,SAAS,EAAE,IAAI;aAChB,CAAC,CAAC;YACH,sBAAsB,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;YAC7C,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;SAC1B;QAAC,OAAO,GAAG,EAAE;YACZ,GAAG,CAAC,qBAAqB,CAAC,iCAAiC,EAAE,GAAG,EAC9D,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;SAC3B;IACH,CAAC;CAAA;AAED,SAAe,qBAAqB,CAAC,GAAwB,EAAE,MAAgB;;;QAC7E,MAAM,KAAK,GAAW,eAAQ,CAAC,GAAG,CAAC,CAAC;QACpC,IAAI,KAAK,KAAK,SAAS,EAAE;YACvB,GAAG,CAAC,qBAAqB,CAAC,wCAAwC,EAAE,mBAAmB,EACrF,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;SAC3B;QAED,MAAM,cAAc,GAAyB,EAAE,CAAC;QAChD,MAAM,IAAI,GAAiB,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAC5C,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,SAAS,CAAC,CAAC;QACtD,MAAM,QAAQ,GAAwB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YACrD,KAAK,EAAE,GAAG,CAAC,EAAE;YACb,SAAS,EAAE,GAAG,CAAC,SAAS;YACxB,KAAK,EAAE,GAAG,CAAC,KAAK,IAAI,EAAE;SACvB,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC;QAEvD,MAAM,cAAc,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACtD,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;YAC9B,MAAM,KAAK,GAAW,OAAO,CAAC,SAAS,CAAC;YACxC,IAAI,GAAG,GAAiB,iBAAU,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;YAC3D,IAAI,GAAG,KAAK,SAAS,IAAI,YAAK,CAAC,SAAS,CAAC,KAAK,CAAC,0CAAE,OAAO,MAAK,SAAS,EAAE;gBACtE,GAAG,GAAG,MAAM,yBAAkB,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;aAC5C;YACD,IAAI,GAAG,KAAK,SAAS,IAAI,YAAK,CAAC,SAAS,CAAC,KAAK,CAAC,0CAAE,SAAS,MAAK,SAAS,EAAE;gBACxE,IAAI,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,SAAS,EAAE;oBACxC,gBAAG,CAAC,MAAM,EAAE,wCAAwC,EAClD,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;iBAC3C;qBAAM;oBACL,gBAAG,CAAC,MAAM,EAAE,mEAAmE,EAAE,KAAK,CAAC,CAAC;iBACzF;gBACD,SAAS;aACV;YAED,MAAM,eAAe,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC;YAC/D,MAAM,aAAa,GAAuB;gBACxC,WAAW,EAAE,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,SAAS;gBAC7C,WAAW,EAAE,GAAG;gBAChB,gBAAgB,EAAE,IAAI;gBACtB,eAAe;gBACf,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CACjC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;aAC9C,CAAC;YACF,cAAc,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SACpC;QAED,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC;QAC7B,GAAG,CAAC,gBAAgB,CAAC;YACnB,EAAE,EAAE,yBAAyB;YAC7B,IAAI,EAAE,SAAS;YACf,OAAO,EAAE,gCAAgC;YACzC,OAAO,EAAE;gBACP;oBACE,KAAK,EAAE,cAAc;oBAAE,MAAM,EAAE,GAAS,EAAE;wBACxC,MAAM,eAAE,CAAC,sBAAsB,CAAC,uBAAc,CAAC,CAAC;wBAChD,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,uBAAc,EAAE,GAAG,iBAAU,CAAC,SAAS,CAAC,GAAG,uBAAc,EAAE,CAAC,CAAC;wBACvF,MAAM,eAAE,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;wBAC/E,iBAAI,CAAC,GAAG,CAAC,uBAAc,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC;oBAC7C,CAAC;iBACF;gBACD;oBACE,KAAK,EAAE,mBAAmB;oBAC1B,MAAM,EAAE,GAAG,EAAE,CAAC,oBAAS,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;iBAChF;aACF;SACF,CAAC,CAAC;;CACJ;AAED,kBAAe,IAAI,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClmBpB,yEAAyC;AAEzC,8GAAiD;AAEjD,MAAM,iBAAiB,GAAuB;IAC5C,QAAQ,EAAE;QACR,CAAC,OAAO,CAAC,wBAA+B,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC5D,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,CAAC;YACrC,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,EAAE,KAAK,CAAC,CAAC;QAC1D,CAAC;QACD,CAAC,OAAO,CAAC,0BAAiC,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC9D,MAAM,EAAE,SAAS,EAAE,GAAG,OAAO,CAAC;YAC9B,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,EAAE,SAAS,CAAC,CAAC;QAC9D,CAAC;KACF;IACD,QAAQ,EAAE,EAAE;CACb,CAAC;AAEF,kBAAe,iBAAiB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBjC,yEAAyC;AAEzC,wGAA8C;AAE9C,MAAM,cAAc,GAAuB;IACzC,QAAQ,EAAE;QACR,CAAC,OAAO,CAAC,oBAA2B,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YACxD,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,EAAE,OAAO,CAAC,CAAC;QAChD,CAAC;QACD,CAAC,OAAO,CAAC,kBAAyB,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YACtD,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,UAAU,CAAC,EAAE,OAAO,CAAC,CAAC;QACpD,CAAC;QACD,CAAC,OAAO,CAAC,mBAA0B,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YACvD,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,kBAAkB,CAAC,EAAE,OAAO,CAAC,CAAC;QAC5D,CAAC;KACF;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,KAAK;QACX,QAAQ,EAAE,EAAE;QACZ,gBAAgB,EAAE,EAAE;KACrB;CACF,CAAC;AAEF,kBAAe,cAAc,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvB9B,yEAAyC;AAEzC,0GAA+C;AAE/C,MAAM,eAAe,GAAuB;IAC1C,QAAQ,EAAE;QACR,CAAC,OAAO,CAAC,0BAAiC,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC9D,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,aAAa,CAAC,EAAE,OAAO,CAAC,CAAC;QACvD,CAAC;QACD,CAAC,OAAO,CAAC,kBAAyB,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YACtD,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,oBAAoB,CAAC,EAAE,OAAO,CAAC,CAAC;QAC9D,CAAC;QACD,CAAC,OAAO,CAAC,sBAA6B,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC1D,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,4BAA4B,CAAC,EAAE,OAAO,CAAC,CAAC;QACtE,CAAC;QACD,CAAC,OAAO,CAAC,UAAiB,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC9C,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;QACnD,CAAC;QACD,CAAC,OAAO,CAAC,SAAgB,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC7C,MAAM,IAAI,GAAG,CAAC,kBAAkB,CAAC,CAAC;YAClC,MAAM,IAAI,GAAG,EAAE,CAAC,MAAM,CAAC,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;YACjE,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACzC,CAAC;QACD,CAAC,OAAO,CAAC,YAAmB,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAChD,MAAM,IAAI,GAAG,CAAC,kBAAkB,CAAC,CAAC;YAClC,MAAM,GAAG,GAAG,iBAAI,CAAC,aAAa,CAAC,KAAK,EAAE,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;YACvE,OAAO,GAAG,CAAC;QACb,CAAC;QACD,CAAC,OAAO,CAAC,SAAgB,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC7C,MAAM,IAAI,GAAG,CAAC,kBAAkB,CAAC,CAAC;YAClC,IAAI,IAAI,GAAG,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;YACzC,MAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE,CAAC,CAAC;YACzD,IAAI,GAAG,KAAK,CAAC,CAAC,EAAE;gBACd,OAAO,KAAK,CAAC;aACd;YACD,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;YACpC,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QACzC,CAAC;KACF;IACD,QAAQ,EAAE;QACR,WAAW,EAAE,KAAK;QAClB,OAAO,EAAE,KAAK;QACd,kBAAkB,EAAE,KAAK;QACzB,0BAA0B,EAAE,KAAK;QACjC,gBAAgB,EAAE,EAAE;KACrB;CACF,CAAC;AAEF,kBAAe,eAAe,CAAC;;;;;;;;;;;;;;;;AC9C/B,MAAa,YAAa,SAAQ,KAAK;IACrC,YAAY,KAAa;QACvB,KAAK,CAAC,GAAG,KAAK,kCAAkC,CAAC,CAAC;QAClD,IAAI,CAAC,IAAI,GAAG,cAAc,CAAC;IAC7B,CAAC;CACF;AALD,oCAKC;AAED,MAAa,eAAgB,SAAQ,KAAK;IACxC;QACE,KAAK,CAAC,iCAAiC,CAAC,CAAC;QACzC,IAAI,CAAC,IAAI,GAAG,iBAAiB,CAAC;IAChC,CAAC;CACF;AALD,0CAKC;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdD,oFAAgC;AAEhC,wEAAwB;AACxB,yEAAiE;AAEjE,wEAAoD;AAKpD,SAAgB,MAAM,CAAI,IAAoC;IAC5D,OAAO,CAAC,GAAG,IAAW,EAAE,EAAE,CAAC,kBAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAC7D,CAAC;AAFD,wBAEC;AAED,MAAM,gBAAgB,GAAG;IACvB,oBAAoB,EAAE,UAAU;IAChC,QAAQ,EAAE,WAAW;IACrB,kBAAkB,EAAE,MAAM;CAC3B;AAED,SAAgB,iBAAiB,CAAC,MAAc;IAC9C,OAAO,CAAC,gBAAgB,CAAC,MAAM,CAAC,KAAK,SAAS,CAAC;QAC7C,CAAC,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;AACxC,CAAC;AAHD,8CAGC;AAED,SAAgB,QAAQ,CAAC,GAAwB,EAAE,SAAkB;IACnE,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;IAC7B,MAAM,OAAO,GAAG,CAAC,SAAS,KAAK,SAAS,CAAC;QACvC,CAAC,CAAC,sBAAS,CAAC,WAAW,CAAC,KAAK,EAAE,SAAS,CAAC;QACzC,CAAC,CAAC,sBAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACnC,IAAI,QAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,MAAM,MAAK,SAAS,EAAE;QACjC,OAAO,SAAS,CAAC;KAClB;IACD,MAAM,IAAI,GAAG,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,YAAY,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;IAC7E,MAAM,SAAS,GAAG,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,YAAY,EAAE,WAAW,EAAE,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC;IAChF,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;AAC7C,CAAC;AAXD,4BAWC;AAED,SAAsB,kBAAkB,CAAC,GAAwB,EAAE,UAAkB;;QACnF,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;QAC7B,IAAI,GAAiB,CAAC;QACtB,MAAM,QAAQ,GAAG,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,YAAY,EAAE,WAAW,EAAE,OAAO,EAAE,UAAU,CAAC,EAAE,SAAS,CAAC,CAAC;QAClG,IAAI,QAAQ,KAAK,SAAS,EAAE;YAC1B,OAAO,SAAS,CAAC;SAClB;QAED,IAAI,QAAQ,CAAC,OAAO,KAAK,SAAS,EAAE;YAClC,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC;YAC/E,MAAM,YAAY,GAAG,sBAAS,CAAC,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC,CAAC;YAC3E,MAAM,OAAO,GAAoB,MAAM,GAAG,CAAC,aAAa,CAAC;gBACvD,OAAO,EAAE,QAAQ,CAAC,OAAO;gBACzB,QAAQ,EAAE,cAAI,CAAC,IAAI,CAAC,YAAY,EAAE,QAAQ,CAAC,SAAS,CAAC;gBACrD,MAAM;gBACN,QAAQ,EAAE,QAAQ,CAAC,IAAI;aACxB,EAAE,IAAI,CAAC,CAAC;YACT,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;gBACtB,MAAM,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBAC9B,MAAM,OAAO,GAAG,CAAC,GAAW,EAAE,KAAU,EAAE,EAAE;oBAC1C,IAAI,KAAK,KAAK,SAAS,EAAE;wBACvB,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,oBAAO,CAAC,kBAAkB,CAAC,UAAU,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC;qBAAE;gBAC7E,CAAC,CAAC;gBAEF,IAAI;oBACF,MAAM,GAAG,GAAG,8BAA8B,CAAC;oBAC3C,IAAI,MAAW,CAAC;oBAChB,IAAI;wBACF,MAAM,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;qBAClC;oBAAC,OAAO,GAAG,EAAE;wBACZ,OAAO,SAAS,CAAC;qBAClB;oBACD,MAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBAC3C,IAAI,CAAC,MAAM,CAAC,QAAQ,KAAK,MAAM,CAAC,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,CAAC,EAAE;wBAChF,OAAO,SAAS,CAAC;qBAClB;oBAED,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;oBACnC,MAAM,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;oBACzB,MAAM,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;oBAE1B,GAAG,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,QAAQ,EAAE,EAAE,MAAM,EAAE,MAAM,CAAC,QAAQ,EAAE,EAAE,CAAC;oBAGrE,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;oBAC3B,OAAO,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;oBACxC,OAAO,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAC;oBACpC,OAAO,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;iBACnC;gBAAC,OAAO,GAAG,EAAE;iBAGb;gBAED,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;aACvB;SACF;QAED,OAAO,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC9B,CAAC;CAAA;AA1DD,gDA0DC;AAED,SAAgB,UAAU,CAAC,QAAyB;IAClD,IAAI,QAAQ,KAAK,SAAS,EAAE;QAC1B,OAAO,SAAS,CAAC;KAClB;IACD,MAAM,OAAO,GAAG,CAAC,GAAiB,EAAE,EAAE,CAAC,CAAC,IAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,MAAM,MAAK,SAAS,IAAI,IAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,MAAM,MAAK,SAAS,IAAI,IAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,KAAK,MAAK,SAAS,CAAC,CAAC;IAC5H,IAAI,GAAG,GAAiB,iBAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,OAAO,EAAE,KAAK,CAAC,EAAE,SAAS,CAAC,CAAC;IACpF,IAAI,OAAO,CAAC,GAAG,CAAC,EAAE;QAChB,OAAO,GAAG,CAAC;KACZ;IACD,MAAM,IAAI,GAAG,iBAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,MAAM,EAAE,SAAS,CAAC,EAAE,SAAS,CAAC,CAAC;IAC5E,IAAI,KAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,MAAM,MAAK,SAAS,EAAE;QAC9B,GAAG,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;QAC3E,IAAI,OAAO,CAAC,GAAG,CAAC,EAAE;YAChB,OAAO,GAAG,CAAC;SACZ;KACF;IAED,OAAO,SAAS,CAAC;AACnB,CAAC;AAlBD,gCAkBC;AAED,SAAgB,SAAS,CAAC,GAAwB;IAChD,MAAM,KAAK,GAAiB,GAAG,CAAC,QAAQ,EAAE,CAAC;IAC3C,OAAO,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,YAAY,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW,CAAC,EAAE,KAAK,CAAC,CAAC;AACtF,CAAC;AAHD,8BAGC;AAED,SAAgB,UAAU,CAAC,KAAW;IACpC,OAAO;QACL,KAAK,CAAC,WAAW,EAAE;QACnB,iBAAI,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;QAClC,iBAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;QAChC,iBAAI,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;QAClC,iBAAI,CAAC,GAAG,CAAC,KAAK,CAAC,UAAU,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;KACrC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACd,CAAC;AARD,gCAQC;AAED,SAAgB,UAAU,CAAC,GAAiB,EAAE,GAAiB;IAC7D,IAAI,IAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,MAAM,MAAK,SAAS,IAAI,IAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,MAAM,MAAK,SAAS,EAAE;QAC1D,OAAO,KAAK,CAAC;KACd;IAED,IAAI,aAAa,CAAC,GAAG,CAAC,KAAK,aAAa,CAAC,GAAG,CAAC,EAAE;QAC7C,OAAO,IAAI,CAAC;KACb;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAVD,gCAUC;AAED,SAAgB,aAAa,CAAC,GAAiB;IAC7C,IAAI,GAAG,KAAK,SAAS,EAAE;QACrB,OAAO,SAAS,CAAC;KAClB;IAED,OAAO,GAAG,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC;AACpD,CAAC;AAND,sCAMC;AAED,SAAgB,cAAc,CAAC,GAAwB;IACrD,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;IAC7B,MAAM,aAAa,GAAG,sBAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACrD,MAAM,IAAI,GAAoC,iBAAI,CAAC,OAAO,CAAC,KAAK,EAC9D,CAAC,YAAY,EAAE,MAAM,EAAE,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;IACpD,KAAK,MAAM,KAAK,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QACrC,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,oBAAO,CAAC,aAAa,CAAC,aAAa,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;KAC3E;AACH,CAAC;AARD,wCAQC;AAED,SAAsB,eAAe,CAAC,GAAW;;QAC/C,MAAM,IAAI,GAAG,cAAI,CAAC,IAAI,CAAC,uBAAc,EAAE,iBAAQ,CAAC,CAAC;QACjD,IAAI;YACF,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC;YAC7B,MAAM,MAAM,GAAG,MAAM,GAAG,CAAC,WAAW,EAAE,CAAC;YACvC,MAAM,eAAE,CAAC,sBAAsB,CAAC,uBAAc,CAAC,CAAC;YAChD,MAAM,eAAE,CAAC,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;SACpD;QAAC,OAAO,GAAG,EAAE;YACZ,OAAO,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SAC5B;IACH,CAAC;CAAA;AAVD,0CAUC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7KD,sEAA+B;AAC/B,wFAAgE;AAChE,kFAAgD;AAChD,4EAAsC;AAEtC,yEAA2E;AAE3E,4FAA0D;AAuB1D,MAAM,sBAAuB,SAAQ,wBAAoC;IACvE,YAAY,KAAa;QACvB,KAAK,CAAC,KAAK,CAAC,CAAC;QAqCP,YAAO,GAAG,GAAG,EAAE;YACrB,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE;gBAClC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,CAAC;aAClF;YAED,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC;QAEO,UAAK,GAAG,GAAG,EAAE;YACnB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC;QAEO,kBAAa,GAAG,CAAC,MAAc,EAAE,EAAE;YACzC,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YACnC,MAAM,IAAI,GAAG,GAAG,MAAM,MAAM,WAAW,CAAC,MAAM,CAAC,CAAC,MAAM,cAAc,WAAW,CAAC,MAAM,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC;YAChH,OAAO,oBAAC,0BAAQ,IAAC,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,IAAG,IAAI,CAAY,CAAC;QACpE,CAAC;QAEO,oBAAe,GAAG,CAAC,QAAQ,EAAE,EAAE;YACrC,IAAI,CAAC,SAAS,CAAC,iBAAiB,GAAG,QAAQ,CAAC;QAC9C,CAAC;QAxDC,IAAI,CAAC,SAAS,CAAC;YACb,iBAAiB,EAAE,SAAS;SAC7B,CAAC,CAAC;IACL,CAAC;IAEM,MAAM;QACX,MAAM,EAAE,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAC5C,MAAM,EAAE,iBAAiB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QACzC,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC5C,MAAM,KAAK,GAAG,iBAAiB,KAAK,SAAS;YAC3C,CAAC,CAAC,GAAG,iBAAiB,MAAM,WAAW,CAAC,iBAAiB,CAAC,CAAC,MAAM,cAAc,WAAW,CAAC,iBAAiB,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG;YACrI,CAAC,CAAC,gBAAgB,CAAC;QACrB,OAAO,CACL,oBAAC,kBAAK,IAAC,EAAE,EAAC,uBAAuB,EAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK;YAC9D,oBAAC,kBAAK,CAAC,MAAM;gBACX;;oBAAM,CAAC,CAAC,kBAAkB,CAAC;wBAAO,CACrB;YACf,oBAAC,kBAAK,CAAC,IAAI;gBACR,CAAC,CAAC,6CAA6C,CAAC;gBACjD,+BAAM;gBACN,oBAAC,6BAAW,IACV,EAAE,EAAC,uBAAuB,EAC1B,KAAK,EAAE,KAAK,EACZ,QAAQ,EAAE,IAAI,CAAC,eAAe,IAE7B,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CACvB,CACH;YACb,oBAAC,kBAAK,CAAC,MAAM;gBACX,oBAAC,wBAAM,IAAC,OAAO,EAAE,IAAI,CAAC,KAAK,IAAG,OAAO,CAAU;gBAC/C,oBAAC,wBAAM,IAAC,OAAO,EAAE,IAAI,CAAC,OAAO,IAAG,qBAAqB,CAAU,CAClD,CACT,CACT,CAAC;IACJ,CAAC;CAuBF;AAED,SAAS,kBAAkB,CAAC,QAA6B;IACvD,OAAO;QACL,SAAS,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,QAAQ,CAAC,8BAAoB,CAAC,IAAI,CAAC,CAAC;KAC1D,CAAC;AACJ,CAAC;AAED,SAAS,eAAe,CAAC,KAAmB;IAC1C,OAAO;QACL,IAAI,EAAE,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,cAAc,EAAE,MAAM,CAAC,EAAE,KAAK,CAAC;QACrE,WAAW,EAAE,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,cAAc,EAAE,UAAU,CAAC,EAAE,EAAE,CAAC;KAC9E,CAAC;AACJ,CAAC;AAED,kBAAe,+BAAe,CAAC,CAAC,QAAQ,EAAE,sBAAsB,CAAC,CAAC,CAChE,qBAAO,CAAC,eAAe,EAAE,kBAAkB,CAAC,CAC1C,sBAAsB,CAAQ,CAAqC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3GxE,sEAA+B;AAC/B,wFAA+C;AAC/C,kFAAgD;AAChD,4EAAsC;AAEtC,yEAAoE;AAEpE,qHAA4C;AAE5C,+FAAqF;AACrF,yEAA2C;AAc3C,MAAM,QAAS,SAAQ,wBAAuB;IAA9C;;QA2CU,oBAAe,GAAG,CAAC,OAAgB,EAAE,EAAE;YAC7C,MAAM,EAAE,oBAAoB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YAC5C,oBAAoB,CAAC,OAAO,CAAC,CAAC;QAChC,CAAC;QACO,WAAM,GAAG,CAAC,OAAgB,EAAE,EAAE;YACpC,MAAM,EAAE,4BAA4B,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YACpD,4BAA4B,CAAC,OAAO,CAAC,CAAC;QACxC,CAAC;IACH,CAAC;IAlDQ,MAAM;QACX,OAAO,CACL;YACG,IAAI,CAAC,aAAa,EAAE;YACrB,oBAAC,uBAAa,OAAE,CACZ,CACP,CAAC;IACJ,CAAC;IAEO,aAAa;QACnB,MAAM,EAAE,CAAC,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAEtC,OAAO,CACL;YACE,oBAAC,8BAAY,QAAE,CAAC,CAAC,wBAAwB,CAAC,CAAgB;YAC1D,oBAAC,mBAAM,IACL,OAAO,EAAE,WAAW,EACpB,QAAQ,EAAE,IAAI,CAAC,MAAM;gBAEpB,CAAC,CAAC,4DAA4D,CAAC;gBAChE,oBAAC,iBAAI,IAAC,EAAE,EAAC,kBAAkB,EAAC,IAAI,EAAC,iCAAiC,IACjE,CAAC,CAAC,uFAAuF;sBACtF,kFAAkF;sBAClF,uFAAuF;sBACvF,yBAAyB,EAAE,EAAE,OAAO,EAAE,EAAE,MAAM,EAAE,uBAAc,EAAE,EAAE,CAAC,CAChE,CACA;YACT,oBAAC,mBAAM,IACL,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,EAC7B,QAAQ,EAAE,IAAI,CAAC,eAAe;gBAE7B,CAAC,CAAC,sEAAsE,CAAC;gBAC1E,oBAAC,iBAAI,IAAC,EAAE,EAAC,mBAAmB,EAAC,IAAI,EAAC,YAAY,IAC7C,CAAC,CAAC,iFAAiF;sBACjF,sFAAsF;sBACtF,wEAAwE,EAAE,EAAE,OAAO,EAAE,EAAE,MAAM,EAAE,uBAAc,EAAE,EAAE,CAAC,CAC9G,CACA,CACL,CACP,CAAC;IACJ,CAAC;CAUF;AAED,SAAS,eAAe,CAAC,KAAmB;IAC1C,OAAO;QACL,WAAW,EAAE,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,aAAa,CAAC,EAAE,KAAK,CAAC;QACjF,SAAS,EAAE,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,oBAAoB,CAAC,EAAE,KAAK,CAAC;KACvF,CAAC;AACJ,CAAC;AAED,SAAS,kBAAkB,CAAC,QAA6B;IACvD,OAAO;QACL,4BAA4B,EAAE,CAAC,OAAgB,EAAE,EAAE,CACjD,QAAQ,CAAC,qCAA0B,CAAC,OAAO,CAAC,CAAC;QAC/C,oBAAoB,EAAE,CAAC,SAAkB,EAAE,EAAE,CAC3C,QAAQ,CAAC,6BAAkB,CAAC,SAAS,CAAC,CAAC;KAC1C,CAAC;AACJ,CAAC;AAED,kBAAe,+BAAe,CAAC,CAAC,QAAQ,EAAE,sBAAsB,CAAC,CAAC,CAChE,qBAAO,CAAC,eAAe,EAAE,kBAAkB,CAAC,CAC1C,QAAQ,CAAQ,CAA6B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/FlD,sEAA+B;AAC/B,wFAA2F;AAC3F,kFAAgD;AAChD,4EAAsC;AAEtC,yEAA0G;AAE1G,4FAAmC;AAInC,qGAA6F;AAC7F,+FAG6B;AAE7B,yEAA2C;AAwB3C,MAAM,aAAc,SAAQ,wBAAoC;IAM9D,YAAY,KAAa;QACvB,KAAK,CAAC,KAAK,CAAC,CAAC;QANP,UAAK,GAAY;YACvB,EAAE,EAAE,MAAM;YACV,IAAI,EAAE,iBAAiB;YACvB,GAAG,EAAE,MAAM;SACZ,CAAC;QAyFM,cAAS,GAAG,GAAG,EAAE;YACvB,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YACxC,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE,mBAAmB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YACjE,WAAW,CAAC,gBAAgB,CAAC,CAAC;YAC9B,mBAAmB,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAClC,CAAC;QAEO,QAAG,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC;QACjB,iBAAY,GAAG,CAAC,GAAY,EAAE,EAAE;YACtC,OAAO,gCACL,GAAG,EAAE,GAAG,CAAC,EAAE,EACX,KAAK,EAAE,GAAG,CAAC,EAAE,aACJ,GAAG,CAAC,EAAE,IAEd,GAAG,CAAC,IAAI,CACF,CAAC;QACZ,CAAC;QAEO,cAAS,GAAG,CAAC,GAAG,EAAE,EAAE;;YAC1B,MAAM,EAAE,OAAO,EAAE,iBAAiB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YAClD,MAAM,KAAK,SAAW,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,0CAAE,YAAY,CAAC,SAAS,CAAC,CAAC;YAC7E,IAAI,KAAK,KAAK,MAAM,EAAE;gBACpB,IAAI,CAAC,SAAS,CAAC,gBAAgB,GAAG,SAAS,CAAC;gBAC5C,iBAAiB,CAAC,OAAO,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;aAC1C;iBAAM;gBACL,IAAI,CAAC,SAAS,CAAC,gBAAgB,GAAG,KAAK,CAAC;gBACxC,iBAAiB,CAAC,OAAO,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;aACtC;QACH,CAAC;QAEO,eAAU,GAAG,CAAC,IAAa,EAAE,EAAE;YACrC,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YACjC,SAAS,CAAC,IAAI,CAAC,CAAC;QAClB,CAAC;QAOO,oBAAe,GAAG,CAAO,GAAG,EAAE,EAAE;YACtC,MAAM,EAAE,GAAG,GAAG,CAAC,aAAa,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;YACrD,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YAC3C,MAAM,GAAG,GAAY,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YACrC,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,EAAE,8BAA8B,EACpF;gBACE,IAAI,EAAE,6EAA6E;sBAC7E,kDAAkD;gBACxD,KAAK,EAAE;oBACL,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,IAAI,EAAE,WAAW,EAAE,uCAAuC,EAAE;oBACpG,EAAE,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,GAAG,EAAE,WAAW,EAAE,2CAA2C,EAAE;iBACvG;aACF,EAAE;gBACD,EAAE,KAAK,EAAE,QAAQ,EAAE;gBACnB,EAAE,KAAK,EAAE,MAAM,EAAE;aAClB,CAAC,CAAC;YAEH,IAAI,GAAG,CAAC,MAAM,KAAK,MAAM,EAAE;gBACzB,MAAM,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBAC/B,IAAI,GAAG,CAAC;gBACR,IAAI;oBACF,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;iBACjC;gBAAC,OAAO,GAAG,EAAE;oBACZ,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,yBAAyB,EAAE,GAAG,EACnE,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;oBAC1B,OAAO;iBACR;gBAED,MAAM,MAAM,GAAY;oBACtB,EAAE,EAAE,IAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,EAAE,MAAK,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,kBAAQ,EAAE;oBAC/C,IAAI;oBACJ,GAAG;iBACJ,CAAC;gBAEF,IAAI,GAAG,KAAK,SAAS,EAAE;oBACrB,SAAS,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;iBAC3B;qBAAM;oBACL,QAAQ,CAAC,MAAM,CAAC,CAAC;iBAClB;aACF;QACH,CAAC;QAtKC,IAAI,CAAC,SAAS,CAAC;YACb,gBAAgB,EAAE,SAAS;SAC5B,CAAC,CAAC;IACL,CAAC;IAEM,iBAAiB;QACtB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAC7B,IAAI,CAAC,SAAS,CAAC,gBAAgB,GAAG,KAAK,CAAC;IAC1C,CAAC;IAEM,MAAM;QACX,MAAM,EAAE,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,aAAa,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QACxD,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QACxC,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;QAC1C,MAAM,KAAK,GAAG,CAAC,IAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,IAAI,MAAK,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,CAAC;QAClE,OAAO,CACL,oBAAC,2BAAS,IAAC,EAAE,EAAC,gCAAgC;YAC5C,oBAAC,8BAAY;gBACV,CAAC,CAAC,wCAAwC,CAAC;gBAC5C,oBAAC,iBAAI,IAAC,EAAE,EAAC,qBAAqB,EAAC,IAAI,EAAE,CAAC,CAAC,gBAAgB,CAAC,IACrD,CAAC,CAAC,2DAA2D;sBAC3D,uEAAuE;sBACvE,yEAAyE;sBACzE,6EAA6E;sBAC7E,0BAA0B,CAAC,CACzB,CACM;YACf,oBAAC,uBAAU,IAAC,IAAI,EAAC,KAAK;gBACpB,oBAAC,uBAAU,CAAC,KAAK;oBACf,oBAAC,4BAAU,IAAC,KAAK,EAAE,EAAE,OAAO,EAAE,iBAAiB,EAAE;wBAC/C,oBAAC,6BAAW,IACV,cAAc,EAAC,QAAQ,EACvB,QAAQ,EAAE,IAAI,CAAC,SAAS,EACxB,KAAK,EAAE,gBAAgB,IAEtB,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAChD,CACH,CACI;gBACnB,oBAAC,uBAAU,CAAC,KAAK;oBACf,oBAAC,4BAAU,CAAC,MAAM,IAAC,KAAK,EAAE,EAAE,OAAO,EAAE,iBAAiB,EAAE;wBACtD,oBAAC,oBAAO,CAAC,MAAM,IACb,OAAO,EAAE,CAAC,CAAC,sBAAsB,CAAC,EAClC,OAAO,EAAE,IAAI,CAAC,eAAe;4BAE7B,oBAAC,iBAAI,IAAC,IAAI,EAAC,KAAK,GAAG,CACJ,CACC;oBACpB,oBAAC,4BAAU,CAAC,MAAM,IAAC,KAAK,EAAE,EAAE,OAAO,EAAE,iBAAiB,EAAE;wBACtD,oBAAC,oBAAO,CAAC,MAAM,IACb,OAAO,EAAE,CAAC,CAAC,qBAAqB,CAAC,EACjC,OAAO,EAAE,IAAI,CAAC,SAAS,EACvB,QAAQ,EAAE,gBAAgB,KAAK,SAAS;4BAExC,oBAAC,iBAAI,IAAC,IAAI,EAAC,QAAQ,GAAG,CACP,CACC;oBACpB,oBAAC,4BAAU,CAAC,MAAM,IAAC,KAAK,EAAE,EAAE,OAAO,EAAE,iBAAiB,EAAE;wBACtD,oBAAC,oBAAO,CAAC,MAAM,eACJ,gBAAgB,EACzB,OAAO,EAAE,CAAC,CAAC,mBAAmB,CAAC,EAC/B,OAAO,EAAE,IAAI,CAAC,eAAe,EAC7B,QAAQ,EAAE,gBAAgB,KAAK,SAAS;4BAExC,oBAAC,iBAAI,IAAC,IAAI,EAAC,MAAM,GAAG,CACL,CACC,CACH,CACR;YACb,oBAAC,mBAAM,IACL,OAAO,EAAE,OAAO,EAChB,QAAQ,EAAE,IAAI,CAAC,UAAU;gBAExB,CAAC,CAAC,iDAAiD,CAAC;gBACrD,oBAAC,iBAAI,IAAC,EAAE,EAAC,eAAe,EAAC,IAAI,EAAC,mBAAmB,IAChD,CAAC,CAAC,+DAA+D;sBAC/D,sEAAsE;sBACtE,0EAA0E;sBAC1E,mEAAmE,EACrE,EAAE,OAAO,EAAE,EAAE,MAAM,EAAE,uBAAc,EAAE,EAAE,CAAC,CAClC,CACA,CACC,CACb,CAAC;IACJ,CAAC;IAqCO,MAAM,CAAC,EAAU;QACvB,MAAM,EAAE,aAAa,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QACrC,OAAO,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;IAClD,CAAC;CA2CF;AAED,SAAS,eAAe,CAAC,KAAmB;IAC1C,MAAM,OAAO,GAAG,sBAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC/C,OAAO;QACL,OAAO;QACP,KAAK,EAAE,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,YAAY,EAAE,cAAc,EAAE,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE,SAAS,CAAC;QAC1F,OAAO,EAAE,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,SAAS,CAAC,EAAE,KAAK,CAAC;QACzE,aAAa,EAAE,iBAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,WAAW,EAAE,kBAAkB,CAAC,EAAE,EAAE,CAAC;KACtF,CAAC;AACJ,CAAC;AAED,SAAS,kBAAkB,CAAC,QAA6B;IACvD,OAAO;QACL,SAAS,EAAE,CAAC,IAAa,EAAE,EAAE,CAAC,QAAQ,CAAC,qBAAU,CAAC,IAAI,CAAC,CAAC;QACxD,QAAQ,EAAE,CAAC,GAAY,EAAE,EAAE,CAAC,QAAQ,CAAC,oBAAS,CAAC,GAAG,CAAC,CAAC;QACpD,SAAS,EAAE,CAAC,EAAU,EAAE,GAAY,EAAE,EAAE,CAAC,QAAQ,CAAC,oBAAS,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;QACrE,WAAW,EAAE,CAAC,EAAU,EAAE,EAAE,CAAC,QAAQ,CAAC,uBAAY,CAAC,EAAE,CAAC,CAAC;QACvD,iBAAiB,EAAE,CAAC,SAAiB,EAAE,KAAa,EAAE,EAAE,CACtD,QAAQ,CAAC,qCAAwB,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QACtD,mBAAmB,EAAE,CAAC,SAAiB,EAAE,EAAE,CACzC,QAAQ,CAAC,uCAA0B,CAAC,SAAS,CAAC,CAAC;KAClD,CAAC;AACJ,CAAC;AAED,kBAAe,+BAAe,CAAC,CAAC,QAAQ,EAAE,sBAAsB,CAAC,CAAC,CAChE,qBAAO,CAAC,eAAe,EAAE,kBAAkB,CAAC,CAC1C,aAAa,CAAQ,CAA6B,CAAC;;;;;;;;;;;;ACnPvD,qC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,uC","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","// This file replaces `format.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\nmodule.exports = function (random, alphabet, size) {\n  // We cant use bytes bigger than the alphabet. To make bytes values closer\n  // to the alphabet, we apply bitmask on them. We look for the closest\n  // `2 ** x - 1` number, which will be bigger than alphabet size. If we have\n  // 30 symbols in the alphabet, we will take 31 (00011111).\n  // We do not use faster Math.clz32, because it is not available in browsers.\n  var mask = (2 << Math.log(alphabet.length - 1) / Math.LN2) - 1\n  // Bitmask is not a perfect solution (in our example it will pass 31 bytes,\n  // which is bigger than the alphabet). As a result, we will need more bytes,\n  // than ID size, because we will refuse bytes bigger than the alphabet.\n\n  // Every hardware random generator call is costly,\n  // because we need to wait for entropy collection. This is why often it will\n  // be faster to ask for few extra bytes in advance, to avoid additional calls.\n\n  // Here we calculate how many random bytes should we call in advance.\n  // It depends on ID length, mask / alphabet size and magic number 1.6\n  // (which was selected according benchmarks).\n\n  // -~f => Math.ceil(f) if n is float number\n  // -~i => i + 1 if n is integer number\n  var step = -~(1.6 * mask * size / alphabet.length)\n  var id = ''\n\n  while (true) {\n    var bytes = random(step)\n    // Compact alternative for `for (var i = 0; i < step; i++)`\n    var i = step\n    while (i--) {\n      // If random byte is bigger than alphabet even after bitmask,\n      // we refuse it by `|| ''`.\n      id += alphabet[bytes[i] & mask] || ''\n      // More compact than `id.length + 1 === size`\n      if (id.length === +size) return id\n    }\n  }\n}\n","'use strict';\nmodule.exports = require('./lib/index');\n","'use strict';\n\nvar randomFromSeed = require('./random/random-from-seed');\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nfunction get () {\n  return alphabet || ORIGINAL;\n}\n\nmodule.exports = {\n    get: get,\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n","'use strict';\n\nvar generate = require('./generate');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1567752802062;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 7;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + generate(version);\n    str = str + generate(clusterWorkerId);\n    if (counter > 0) {\n        str = str + generate(counter);\n    }\n    str = str + generate(seconds);\n    return str;\n}\n\nmodule.exports = build;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar random = require('./random/random-byte');\nvar format = require('nanoid/format');\n\nfunction generate(number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + format(random, alphabet.get(), 1);\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = generate;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar build = require('./build');\nvar isValid = require('./is-valid');\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = require('./util/cluster-worker-id') || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.isValid = isValid;\n","'use strict';\nvar alphabet = require('./alphabet');\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var nonAlphabetic = new RegExp('[^' +\n      alphabet.get().replace(/[|\\\\{}()[\\]^$+*?.-]/g, '\\\\$&') +\n    ']');\n    return !nonAlphabetic.test(id);\n}\n\nmodule.exports = isShortId;\n","'use strict';\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nvar randomByte;\n\nif (!crypto || !crypto.getRandomValues) {\n    randomByte = function(size) {\n        var bytes = [];\n        for (var i = 0; i < size; i++) {\n            bytes.push(Math.floor(Math.random() * 256));\n        }\n        return bytes;\n    };\n} else {\n    randomByte = function(size) {\n        return crypto.getRandomValues(new Uint8Array(size));\n    };\n}\n\nmodule.exports = randomByte;\n","'use strict';\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n","'use strict';\n\nmodule.exports = 0;\n","import { createAction } from 'redux-act';\r\n\r\nexport const setFulfillerSubscription = createAction('SET_FULFILLER_SUBSCRIPTION',\r\n  (profileId: string, subId: string) => ({ profileId, subId }));\r\n\r\n  export const clearFulfillerSubscription = createAction('CLEAR_FULFILLER_SUBSCRIPTION',\r\n  (profileId: string) => ({ profileId }));","import { createAction } from 'redux-act';\r\nimport { IProfileData } from '../types';\r\n\r\nexport const setOpenProfileSelect =\r\n  createAction('SET_OPEN_SELECT_USERDATA_PROFILE_DIALOG', (open: boolean) => {\r\n    return open;\r\n  });\r\n\r\nexport const setProfileUserData = createAction('SET_USERDATA_PROFILE_DATA',\r\n  (profileData: { [profileId: string]: IProfileData }) => profileData);\r\n\r\nexport const setUserDataFilePath = createAction('SET_USERDATA_FILEPATH',\r\n  (filePath: string) => filePath)","import { createAction } from 'redux-act';\r\n\r\nimport { IUrlSub } from '../types';\r\n\r\nexport const setAutoFulfillDependencies =\r\n  createAction('SET_AUTO_FULFILL_DEPENDENCIES', (fulfill: boolean) => fulfill);\r\n\r\nexport const setLockSub =\r\n  createAction('SET_DEP_FULFILLER_LOCK_SUB', (lock: boolean) => lock);\r\n\r\nexport const setEnableDebugMode =\r\n  createAction('SET_DEP_FULFILLER_DEBUG', (debug: boolean) => debug);\r\n\r\nexport const setReadNonPremiumNotif =\r\n  createAction('SET_READ_NON_PREMIUM_NOTIFICATION', (read: boolean) => read);\r\n\r\nexport const addUrlSub =\r\n  createAction('ADD_URL_SUB', (urlSub: IUrlSub) => urlSub);\r\n\r\nexport const removeUrlSub =\r\n  createAction('REMOVE_URL_SUB', (id: string) => id);\r\n\r\nexport const setUrlSub =\r\n  createAction('SET_URL_SUB', (id: string, urlSub: IUrlSub) => ({ id, urlSub }));\r\n","import path from 'path';\r\nimport { util } from 'vortex-api';\r\n\r\nexport const DEP_MAN_SUFFIX = '.vdeps';\r\nexport const SUB_FILE = 'subscription' + DEP_MAN_SUFFIX;\r\nexport const MANIFESTS_PATH = path.join(util.getVortexPath('temp'), 'dependency manifests');\r\nexport const NEXUS = 'www.nexusmods.com';\r\nexport const ACTIVITY_NOTIF = 'dep-fulfiller-download-activity';","import { actions, log, types, selectors, util } from 'vortex-api';\r\n\r\nimport { INexusDownloadInfo, NotPremiumError } from './types';\r\nimport { convertGameDomain, isPremium } from './util';\r\n\r\nfunction genDownloadProps(api: types.IExtensionApi, archiveName: string) {\r\n  const state = api.getState();\r\n  const downloads: { [dlId: string]: types.IDownload } = util.getSafe(state, ['persistent', 'downloads', 'files'], {});\r\n  const downloadId = Object.keys(downloads).find(dId => downloads[dId].localPath === archiveName);\r\n  return { downloads, downloadId, state };\r\n}\r\n\r\nexport async function install(api: types.IExtensionApi,\r\n                              downloadInfo: INexusDownloadInfo,\r\n                              downloadId: string) {\r\n  const state = api.getState();\r\n  if (downloadInfo.allowAutoInstall && state.settings.automation?.['install'] !== true) {\r\n    const gameId = convertGameDomain(downloadInfo.downloadIds.gameId);\r\n    const profileId = selectors.lastActiveProfileForGame(state, gameId);\r\n    const mods: { [modId: string]: types.IMod } =\r\n      util.getSafe(state, ['persistent', 'mods', gameId], {});\r\n    const mId = Object.keys(mods).find(id =>\r\n      mods[id].attributes?.fileId === downloadInfo.downloadIds.fileId);\r\n    if (!mId) {\r\n      return new Promise((resolve, reject) => {\r\n        api.events.emit('start-install-download', downloadId, true, (err, modId) => {\r\n          if (err) {\r\n            log('error', 'failed to install dependency', err);\r\n            return resolve(undefined);\r\n          }\r\n\r\n          if (downloadInfo.allowAutoEnable && state.settings.automation.enable !== true) {\r\n            api.store.dispatch(actions.setModEnabled(profileId, modId, true));\r\n          }\r\n          return resolve(modId);\r\n        });\r\n      });\r\n    } else {\r\n      if (downloadInfo.allowAutoEnable && state.settings.automation.enable !== true) {\r\n        api.store.dispatch(actions.setModEnabled(profileId, mId, true));\r\n      }\r\n      return Promise.resolve(mId);\r\n    }\r\n  }\r\n\r\n  return Promise.resolve(undefined);\r\n}\r\n\r\nexport async function downloadImpl(api: types.IExtensionApi,\r\n                                   downloadInfo: INexusDownloadInfo,\r\n                                   progress?: (archiveName: string) => void) {\r\n  const { downloadIds, archiveName, allowAutoInstall } = downloadInfo;\r\n  if (!isPremium(api)) {\r\n    return Promise.reject(new NotPremiumError());\r\n  }\r\n  if (progress) {\r\n    progress(downloadInfo.archiveName);\r\n  }\r\n  if (genDownloadProps(api, archiveName).downloadId !== undefined) {\r\n    const { downloadId } = genDownloadProps(api, downloadInfo.archiveName);\r\n    install(api, downloadInfo, downloadId);\r\n    return Promise.resolve();\r\n  }\r\n\r\n  return api.emitAndAwait('nexus-download', convertGameDomain(downloadIds.gameId),\r\n    downloadIds.modId, downloadIds.fileId, archiveName, allowAutoInstall)\r\n    .then(() => {\r\n      const { downloadId } = genDownloadProps(api, downloadInfo.archiveName);\r\n      install(api, downloadInfo, downloadId);\r\n      return Promise.resolve();\r\n    })\r\n    .catch(err => {\r\n      log('error', 'failed to download from NexusMods.com',\r\n        JSON.stringify(downloadInfo, undefined, 2));\r\n      err['attachLogOnReport'] = true;\r\n      api.showErrorNotification('Failed to download dependency', err);\r\n    });\r\n}\r\n","import { clipboard } from 'electron';\r\nimport * as _ from 'lodash';\r\nimport * as path from 'path';\r\nimport { setTimeout } from 'timers';\r\nimport turbowalk, { IEntry } from 'turbowalk';\r\nimport { actions, fs, log, selectors, types, util } from 'vortex-api';\r\nimport { setOpenProfileSelect, setProfileUserData, setUserDataFilePath } from './actions/session';\r\nimport { setReadNonPremiumNotif } from './actions/settings';\r\nimport { ACTIVITY_NOTIF, DEP_MAN_SUFFIX, MANIFESTS_PATH, NEXUS, SUB_FILE } from './common';\r\nimport { downloadImpl, install } from './downloader';\r\nimport persistentReducer from './reducers/persistent';\r\nimport sessionReducer from './reducers/session';\r\nimport settingsReducer from './reducers/settings';\r\nimport {\r\n  IDownloadIds, IExtractedModData, INexusDownloadInfo, IProfileData,\r\n  IProps, IUrlSub, NotPremiumError } from './types';\r\nimport { compareIds, convertGameDomain, disableAllMods, extractIds, fetchDepFromUrl, formatTime,\r\n  genIdentifier, genProps, isPremium, resolveIdsUsingMD5 } from './util';\r\nimport ProfileSelectionDialog from './views/ProfileSelectionDialog';\r\nimport Settings from './views/Settings';\r\n\r\n// 5 minute installation timeout should be sufficient no ?\r\n//  might make this configurable by the user in the future.\r\nconst TIMEOUT_MS = 60000 * 5;\r\n\r\nfunction init(context: types.IExtensionContext) {\r\n  context.registerReducer(['settings', 'interface'], settingsReducer);\r\n  context.registerReducer(['session', 'depfulfiller'], sessionReducer);\r\n  context.registerReducer(['persistent', 'depfulfiller'], persistentReducer);\r\n\r\n  context.registerAction('mods-action-icons', 300, 'clone', {}, 'Export Dependencies',\r\n    instanceIds => { genDependencyManifest(context.api, instanceIds); });\r\n\r\n  context.registerAction('mods-multirow-actions', 300, 'clone', {}, 'Export Dependencies',\r\n    instanceIds => { genDependencyManifest(context.api, instanceIds); });\r\n\r\n  context.registerAction('mod-icons', 300, 'import', {}, 'Import From Dependencies Dialog',\r\n    instanceIds => queryImportType(context.api));\r\n\r\n  context.registerAction('mod-icons', 300, 'import', {}, 'Import From Application State',\r\n    instanceIds => { genFromUserData(context.api); }, () => {\r\n      const state = context.api.getState();\r\n      return util.getSafe(state, ['settings', 'interface', 'fulfillerDebugMode'], false);\r\n    });\r\n\r\n  context.registerAction('mod-icons', 300, 'import', {}, 'Import From Subscription',\r\n    instanceIds => { genFromSubscription(context.api); }, () => {\r\n      const state = context.api.getState();\r\n      const profile = selectors.activeProfile(state);\r\n      if (profile?.id === undefined) {\r\n        return false;\r\n      }\r\n      const subId = util.getSafe(state,\r\n        ['persistent', 'depfulfiller', profile.id, 'subId'], undefined);\r\n      return subId !== 'none' && subId !== undefined;\r\n    });\r\n\r\n  context.registerSettings('Interface', Settings, undefined, undefined, 10);\r\n\r\n  context.registerDialog('depfulfiller-select-profile-dialog', ProfileSelectionDialog, () => ({\r\n    onSelectProfile: (profileData: IProfileData) => onProfileSelect(context.api, profileData),\r\n  }));\r\n\r\n  context.once(() => {\r\n    context.api.onStateChange(['persistent', 'mods'],\r\n      (prev, current) => onModsChange(context.api, prev, current));\r\n  });\r\n\r\n  return true;\r\n}\r\n\r\nasync function genFromSubscription(api: types.IExtensionApi): Promise<void> {\r\n  const state = api.getState();\r\n  const profile = selectors.activeProfile(state);\r\n  const subId = util.getSafe(state,\r\n    ['persistent', 'depfulfiller', profile.id, 'subId'], undefined);\r\n  if (subId === 'none') {\r\n    return;\r\n  }\r\n  const subs: IUrlSub[] = util.getSafe(state, ['settings', 'interface', 'urlSubscriptions'], []);\r\n  const subscription = subs.find(sub => sub.id === subId);\r\n  try {\r\n    await fetchDepFromUrl(subscription.url);\r\n    await genFromFilePath(api, path.join(MANIFESTS_PATH, SUB_FILE));\r\n    api.store.dispatch(actions.setDeploymentNecessary(profile.gameId, true));\r\n  } catch (err) {\r\n    api.showErrorNotification('Failed to import from subscription', err);\r\n  }\r\n}\r\n\r\nasync function onProfileSelect(api: types.IExtensionApi, profileData: IProfileData) {\r\n  const state = api.getState();\r\n  const filePath = util.getSafe(state, ['session', 'depfulfiller', 'userDataFilePath'], undefined);\r\n  if (filePath === undefined) {\r\n    api.showErrorNotification('Invalid userdata filepath', new util.NotFound('User data file'));\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const data = await fs.readFileAsync(filePath, { encoding: 'utf8' });\r\n    let persistent = JSON.parse(data);\r\n    persistent = persistent.persistent !== undefined\r\n      ? persistent.persistent\r\n      : persistent;\r\n    if (persistent.downloads.files === undefined\r\n     || persistent.mods?.[profileData.gameId] === undefined\r\n     || persistent.profiles === undefined) {\r\n      throw new util.DataInvalid('Selected file does not contain required data');\r\n    }\r\n\r\n    const nexusDownloads: INexusDownloadInfo[] = [];\r\n    const mods: types.IMod[] = profileData.enabledModIds.map(modId =>\r\n      persistent.mods[profileData.gameId][modId]).filter(mod => mod !== undefined);\r\n    const modsData: IExtractedModData[] = mods.map(mod => ({\r\n      modId: mod.id,\r\n      archiveId: mod.archiveId,\r\n      rules: mod.rules || [],\r\n    })).filter(modData => modData.archiveId !== undefined);\r\n\r\n    const includedModIds = modsData.map(mod => mod.modId);\r\n    for (const modData of modsData) {\r\n      const arcId: string = modData.archiveId;\r\n      const ids: IDownloadIds = extractIds(persistent.downloads.files[arcId]);\r\n      if (ids === undefined || persistent.downloads.files[arcId]?.localPath === undefined) {\r\n        if (persistent.downloads.files[arcId] !== undefined) {\r\n          log('warn', 'failed to extract required information',\r\n            JSON.stringify(persistent.downloads.files[arcId]));\r\n        } else {\r\n          log('warn', 'failed to extract required information - download archive missing', arcId);\r\n        }\r\n        continue;\r\n      }\r\n\r\n      const nexusDownload: INexusDownloadInfo = {\r\n        archiveName: persistent.downloads.files[arcId].localPath,\r\n        downloadIds: ids,\r\n        allowAutoInstall: true,\r\n        rules: modData.rules.filter(rule =>\r\n          includedModIds.includes(rule.reference.id)),\r\n      };\r\n      nexusDownloads.push(nexusDownload);\r\n    }\r\n\r\n    await fulfillDependencies(api, nexusDownloads);\r\n    api.sendNotification({\r\n      message: 'All dependencies fulfilled',\r\n      type: 'success',\r\n      id: 'all-dependencies-fulfilled',\r\n      displayMS: 5000,\r\n    });\r\n    raiseRulesNotification(api, nexusDownloads);\r\n  } catch (err) {\r\n    api.showErrorNotification('Failed to generate dependencies from user data', err,\r\n      { allowReport: false });\r\n  }\r\n}\r\n\r\nasync function genFromUserData(api: types.IExtensionApi): Promise<void> {\r\n  const selectedFile = await api.selectFile({\r\n    title: 'User Persistent Data',\r\n    filters: [{ name: 'JSON file', extensions: ['json'] }],\r\n  });\r\n\r\n  if (selectedFile === undefined) {\r\n    // Must've canceled.\r\n    return;\r\n  }\r\n  try {\r\n    const data = await fs.readFileAsync(selectedFile, { encoding: 'utf8' });\r\n    let persistent = JSON.parse(data);\r\n    persistent = persistent.persistent !== undefined\r\n      ? persistent.persistent\r\n      : persistent;\r\n    if (persistent.downloads === undefined\r\n     || persistent.mods === undefined\r\n     || persistent.profiles === undefined) {\r\n      throw new util.DataInvalid('Selected file does not contain required data');\r\n    }\r\n\r\n    api.store.dispatch(setUserDataFilePath(selectedFile));\r\n    const profileData: { [profileId: string]: IProfileData } =\r\n      Object.keys(persistent.profiles).reduce((accum, iter) => {\r\n      const profile = persistent.profiles[iter];\r\n      const modState = util.getSafe(profile, ['modState'], {});\r\n      accum[iter] = {\r\n        id: iter,\r\n        gameId: profile.gameId,\r\n        enabledModIds: Object.keys(modState).filter(modId => util.getSafe(modState, [modId, 'enabled'], false)),\r\n      };\r\n      return accum;\r\n    }, {});\r\n\r\n    api.store.dispatch(setProfileUserData(profileData));\r\n    api.store.dispatch(setOpenProfileSelect(true));\r\n  } catch (err) {\r\n    api.showErrorNotification('Failed to generate dependencies from user data', err,\r\n      { allowReport: false });\r\n  }\r\n}\r\n\r\nasync function onModsChange(api: types.IExtensionApi, prev: any, current: any) {\r\n  let state = api.getState();\r\n  const autoFulfill = util.getSafe(state, ['settings', 'interface', 'autofulfill'], false);\r\n  if (!autoFulfill) {\r\n    return;\r\n  }\r\n\r\n  const gameModes = Object.keys(current);\r\n  for (const gameMode of gameModes) {\r\n    if (prev[gameMode] === undefined) {\r\n      continue;\r\n    }\r\n    const prevMods = Object.keys(prev[gameMode]);\r\n    const currMods = Object.keys(current[gameMode]);\r\n    if (!_.isEqual(prevMods, currMods)) {\r\n      const stagingFolder = selectors.installPathForGame(state, gameMode);\r\n      const tryGenFromFilePath = async (modId: string): Promise<void> => {\r\n        state = api.getState();\r\n        const mod: types.IMod = util.getSafe(state,\r\n          ['persistent', 'mods', gameMode, modId], undefined);\r\n        if (mod?.installationPath === undefined) {\r\n          // Well if the mod is gone, no point in still trying to do this.\r\n          log('debug', 'failed to complete dependency check - mod was removed', modId);\r\n          return Promise.resolve();\r\n        }\r\n        // Mod still installing - wait for it.\r\n        if (mod.state === 'installing') {\r\n          return new Promise((resolve) => setTimeout(() =>\r\n            resolve(tryGenFromFilePath(modId)), 5000));\r\n        } else if (mod.state === 'installed') {\r\n          const installationPath = path.join(stagingFolder, mod.installationPath);\r\n          return genFromDirPath(api, installationPath);\r\n        }\r\n      };\r\n      const diff = _.difference(currMods, prevMods);\r\n      await Promise.all(diff.map(async modId => {\r\n        log('info', 'attempting to fulfill mod dependencies', modId);\r\n        const modInstallationPath = current[gameMode]?.[modId]?.installationPath;\r\n        if (modInstallationPath !== undefined) {\r\n          try {\r\n            await Promise.race([\r\n              tryGenFromFilePath(modId),\r\n              new Promise((resolve) => setTimeout(() => {\r\n                log('error', 'dependency check timed out - use \"Import Dependencies\" '\r\n                  + 'when mod installation finishes', modId);\r\n                return resolve(undefined);\r\n              }, TIMEOUT_MS)),\r\n            ]);\r\n          } catch (err) {\r\n            log('error', 'failed to complete dependency check', err);\r\n          }\r\n        }\r\n      }));\r\n    }\r\n  }\r\n}\r\n\r\nfunction raiseRulesNotification(api: types.IExtensionApi, downloads: INexusDownloadInfo[]) {\r\n  const hasRules = downloads.find(down =>\r\n    down.rules !== undefined && down.rules.length > 0) !== undefined;\r\n  if (!hasRules) {\r\n    return;\r\n  }\r\n\r\n  const t = api.translate;\r\n  api.sendNotification({\r\n    id: 'import-conflict-rules',\r\n    type: 'info',\r\n    message: t('Imported dependencies contained conflict rules'),\r\n    allowSuppress: false,\r\n    noDismiss: false,\r\n    actions: [\r\n      { title: 'More', action: (dismiss) => api.showDialog('question', t('Import conflict rules'), {\r\n        bbcode: t('The imported dependencies contain pre-defined rule metadata - if you would like to try '\r\n                + 'to import these, please make sure that all the dependencies have finished downloading '\r\n                + 'and are installed before clicking the \"Import Rules\" button.'),\r\n      }, [\r\n        { label: 'Do This Later' },\r\n        {\r\n          label: 'Import Rules',\r\n          action: () => {\r\n            fulfillRules(api, downloads);\r\n            dismiss();\r\n          },\r\n        },\r\n      ]),\r\n      },\r\n    ],\r\n  });\r\n}\r\n\r\nfunction fulfillRules(api: types.IExtensionApi, downloads: INexusDownloadInfo[]) {\r\n  const props: IProps = genProps(api);\r\n  if (props === undefined) {\r\n    return;\r\n  }\r\n\r\n  // const reverseType = (rule: IModRule) => rule.type === 'before' ? 'after' : 'before';\r\n  const hasRule = (rule: types.IModRule, modId: string) =>\r\n    util.testModReference(props.mods[modId], rule.reference);\r\n\r\n  // const refMod = (rule: IModRule) => Object.keys(props.mods)\r\n  //   .map(iter => props.mods[iter])\r\n  //   .find(iter => util.testModReference(iter, rule.reference)\r\n  //               && iter.rules !== undefined\r\n  //               && (iter.rules.find(rule => findRule(rule, iter.id)) !== undefined));\r\n\r\n  const mod = (fileName) => path.basename(fileName, path.extname(fileName));\r\n  const match = (modId) => downloads.find(dwnl => mod(dwnl.archiveName) === modId) !== undefined;\r\n  const installed = Object.keys(props.mods).filter(match);\r\n  for (const download of downloads) {\r\n    if (download.rules === undefined) {\r\n      continue;\r\n    }\r\n\r\n    for (const rule of download.rules) {\r\n      if (installed.includes(rule.reference?.id) && !hasRule(rule, mod(download.archiveName))) {\r\n        api.store.dispatch(actions.addModRule(\r\n          convertGameDomain(download.downloadIds.gameId), mod(download.archiveName), rule));\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nasync function fulfillDependencies(api: types.IExtensionApi, downloads: INexusDownloadInfo[]) {\r\n  const totalDownloads = downloads.length;\r\n  let idx = 0;\r\n  const progress = (archiveName: string) => {\r\n    api.sendNotification({\r\n      id: ACTIVITY_NOTIF,\r\n      type: 'activity',\r\n      title: 'Downloading dependencies - this can take a while!',\r\n      message: archiveName,\r\n      noDismiss: true,\r\n      allowSuppress: false,\r\n      progress: (idx * 100) / totalDownloads,\r\n    });\r\n    ++idx;\r\n  };\r\n\r\n  for (const download of downloads) {\r\n    try {\r\n      await downloadImpl(api as any, download, progress);\r\n    } catch (err) {\r\n      const state = api.getState();\r\n      if (err instanceof NotPremiumError) {\r\n        const readNotif = util.getSafe(state,\r\n          ['settings', 'interface', 'readNonPremiumNotification'], false);\r\n        if (!readNotif) {\r\n          api.sendNotification({\r\n            message: 'Cannot fulfill dependencies automatically',\r\n            type: 'warning',\r\n            id: 'not-a-premium-account',\r\n            actions: [\r\n              {\r\n                title: 'More',\r\n                action: (dismiss) => api.showDialog('info', 'Not a premium member', {\r\n                  bbcode: 'As you probably know - Nexus Mods is one of the biggest mods '\r\n                        + 'hosting sites on the internet - this of course means that we must financially '\r\n                        + 'support an infrastructure capable of holding a MASSIVE volume of data; '\r\n                        + 'needless to say, this is very expensive and we wouldn\\'t be able to afford '\r\n                        + 'to maintain and support it without your help.[br][/br][br][/br]'\r\n                        + 'Please understand that as a free user/supporter certain features will be '\r\n                        + 'unavailable as they will actively bypass the means by which you contribute '\r\n                        + 'to our community - in your case - by watching the ads on our website.[br][/br][br][/br]'\r\n                        + 'Although the dependency fulfiller extension is unable to pull your mods automatically, '\r\n                        + 'the mod pages for the required mods have been opened in your browser, please download the files from there.',\r\n                },\r\n                [\r\n                  {\r\n                    label: 'Close',\r\n                    action: () => {\r\n                      api.store.dispatch(setReadNonPremiumNotif(true));\r\n                      dismiss();\r\n                    },\r\n                  },\r\n                ]),\r\n              },\r\n            ],\r\n          });\r\n        }\r\n      } else {\r\n        api.showErrorNotification('Cannot fulfill dependencies automatically', err,\r\n          { allowReport: false });\r\n      }\r\n\r\n      const props: IProps = genProps(api);\r\n      // Check if the user already has this archive.\r\n      if (props !== undefined) {\r\n        const dwnlId = Object.keys(props.downloads).find(dlId => {\r\n          const dl = props.downloads[dlId];\r\n          if (dl?.localPath === download.archiveName) {\r\n            return true;\r\n          }\r\n          const ids = extractIds(dl);\r\n          return compareIds(ids, download.downloadIds);\r\n        });\r\n\r\n        if (dwnlId !== undefined) {\r\n          await install(api, download, dwnlId);\r\n          continue;\r\n        }\r\n      }\r\n      const url = path.join(NEXUS, download.downloadIds.gameId,\r\n        'mods', download.downloadIds.modId.toString())\r\n        + `?tab=files&file_id=${download.downloadIds.fileId}&nmm=1`;\r\n      util.opn(url).catch(err => null);\r\n    }\r\n  }\r\n\r\n  api.dismissNotification(ACTIVITY_NOTIF);\r\n}\r\n\r\nfunction queryImportType(api: types.IExtensionApi) {\r\n  const t = api.translate;\r\n  const state = api.getState();\r\n  const activeGameId = selectors.activeGameId(state);\r\n  const stagingFolder = selectors.installPathForGame(state, activeGameId);\r\n  api.showDialog('question', 'Import Dependencies', {\r\n    bbcode: t('Vortex\\'s dependency fulfiller can attempt to automatically download '\r\n            + 'and install dependencies using two methods:[br][/br][br][/br][list][*] By searching your '\r\n            + 'game\\'s staging folder for files with the \"{{suffix}}\" suffix. This method '\r\n            + 'requires the mod author to include such a file alongside their mod to function '\r\n            + 'correctly. [*] Using any data you may have copied to your clipboard. Your friend '\r\n            + 'can select multiple mods and export their mods information on their Vortex copy '\r\n            + 'and send you the raw data/mods information which you can then copy (CTRL + C) '\r\n            + 'and click the \"Import from Clipboard\" button below.[/list][br][/br][br][/br]'\r\n            + 'Please note: you will need a Nexus Mods premium account for this to be done automatically. '\r\n            + 'For free/supporter accounts, Vortex will open the webpages for you and you will have to '\r\n            + 'download the mods manually.',\r\n          { replace: { suffix: DEP_MAN_SUFFIX } }),\r\n  }, [\r\n    { label: 'Close' },\r\n    { label: 'Import from Clipboard', action: () => genFromClipboard(api) },\r\n    { label: 'Import from Staging Folder', action: () => genFromDirPath(api, stagingFolder) },\r\n  ]);\r\n}\r\n\r\nasync function genFromClipboard(api: types.IExtensionApi) {\r\n  const fromClipBoard = clipboard.readText();\r\n  try {\r\n    const nexusDownloads: INexusDownloadInfo[] = JSON.parse(fromClipBoard);\r\n    await fulfillDependencies(api, nexusDownloads);\r\n    api.sendNotification({\r\n      message: 'All dependencies fulfilled',\r\n      type: 'success',\r\n      id: 'all-dependencies-fulfilled',\r\n      displayMS: 5000,\r\n    });\r\n    raiseRulesNotification(api, nexusDownloads);\r\n  } catch (err) {\r\n    err.message = (err.message.indexOf('SyntaxError'))\r\n      ? 'Invalid JSON string received - the clipboard based import expects valid JSON'\r\n      : err.message;\r\n    api.showErrorNotification('Failed to download dependencies', err,\r\n      { allowReport: false });\r\n  }\r\n}\r\n\r\nasync function genFromFilePath(api: types.IExtensionApi, filePath: string) {\r\n  let parsedDownloadInfo: INexusDownloadInfo[] = [];\r\n  try {\r\n    const data = await fs.readFileAsync(filePath, { encoding: 'utf8' });\r\n    const parsedData: INexusDownloadInfo[] = JSON.parse(data);\r\n    parsedDownloadInfo = parsedDownloadInfo.concat(parsedData);\r\n  } catch (err) {\r\n    log('error', 'failed to read/parse dependency manifest', err);\r\n  }\r\n\r\n  const lockedSub = util.getSafe(api.getState(), ['settings', 'interface', 'lockSub'], false);\r\n  if (lockedSub) {\r\n    disableAllMods(api);\r\n    parsedDownloadInfo = parsedDownloadInfo.map(download => ({\r\n      ...download,\r\n      allowAutoEnable: true,\r\n    }));\r\n  }\r\n  const uniqueDownloads: INexusDownloadInfo[] =\r\n    Array.from(new Set(parsedDownloadInfo.map(a => genIdentifier(a.downloadIds))))\r\n      .map(id => parsedDownloadInfo.find(a => genIdentifier(a.downloadIds) === id));\r\n\r\n  if (uniqueDownloads.length === 0) {\r\n    return;\r\n  }\r\n  try {\r\n    await fulfillDependencies(api, uniqueDownloads);\r\n    api.sendNotification({\r\n      message: 'All dependencies fulfilled',\r\n      type: 'success',\r\n      id: 'all-dependencies-fulfilled',\r\n      displayMS: 5000,\r\n    });\r\n    raiseRulesNotification(api, uniqueDownloads);\r\n    return Promise.resolve();\r\n  } catch (err) {\r\n    api.showErrorNotification('Failed to download dependencies', err,\r\n      { allowReport: false });\r\n  }\r\n}\r\n\r\nasync function genFromDirPath(api: types.IExtensionApi, dirPath: string) {\r\n  let allManifests: IEntry[] = [];\r\n  await turbowalk(dirPath, entries => {\r\n    const manifests = entries.filter(entry => !entry.isDirectory\r\n      && path.basename(entry.filePath).endsWith(DEP_MAN_SUFFIX));\r\n    allManifests = allManifests.concat(manifests);\r\n  }, { recurse: true });\r\n\r\n  let parsedDownloadInfo: INexusDownloadInfo[] = [];\r\n  for (const manifest of allManifests) {\r\n    try {\r\n      const data = await fs.readFileAsync(manifest.filePath, { encoding: 'utf8' });\r\n      const parsedData: INexusDownloadInfo[] = JSON.parse(data);\r\n      parsedDownloadInfo = parsedDownloadInfo.concat(parsedData);\r\n    } catch (err) {\r\n      log('error', 'failed to read/parse dependency manifest', err);\r\n      continue;\r\n    }\r\n  }\r\n\r\n  const uniqueDownloads: INexusDownloadInfo[] =\r\n    Array.from(new Set(parsedDownloadInfo.map(a => genIdentifier(a.downloadIds))))\r\n      .map(id => parsedDownloadInfo.find(a => genIdentifier(a.downloadIds) === id));\r\n\r\n  if (uniqueDownloads.length === 0) {\r\n    return;\r\n  }\r\n  try {\r\n    await fulfillDependencies(api, uniqueDownloads);\r\n    api.sendNotification({\r\n      message: 'All dependencies fulfilled',\r\n      type: 'success',\r\n      id: 'all-dependencies-fulfilled',\r\n      displayMS: 5000,\r\n    });\r\n    raiseRulesNotification(api, uniqueDownloads);\r\n    return Promise.resolve();\r\n  } catch (err) {\r\n    api.showErrorNotification('Failed to download dependencies', err,\r\n      { allowReport: false });\r\n  }\r\n}\r\n\r\nasync function genDependencyManifest(api: types.IExtensionApi, modIds: string[]) {\r\n  const props: IProps = genProps(api);\r\n  if (props === undefined) {\r\n    api.showErrorNotification('Failed to create dependencies manifest', 'no active profile',\r\n      { allowReport: false });\r\n  }\r\n\r\n  const nexusDownloads: INexusDownloadInfo[] = [];\r\n  const mods: types.IMod[] = modIds.map(modId =>\r\n    props.mods[modId]).filter(mod => mod !== undefined);\r\n  const modsData: IExtractedModData[] = mods.map(mod => ({\r\n    modId: mod.id,\r\n    archiveId: mod.archiveId,\r\n    rules: mod.rules || [],\r\n  })).filter(modData => modData.archiveId !== undefined);\r\n\r\n  const includedModIds = modsData.map(mod => mod.modId);\r\n  for (const modData of modsData) {\r\n    const arcId: string = modData.archiveId;\r\n    let ids: IDownloadIds = extractIds(props.downloads[arcId]);\r\n    if (ids === undefined && props.downloads[arcId]?.fileMD5 !== undefined) {\r\n      ids = await resolveIdsUsingMD5(api, arcId);\r\n    }\r\n    if (ids === undefined || props.downloads[arcId]?.localPath === undefined) {\r\n      if (props.downloads[arcId] !== undefined) {\r\n        log('warn', 'failed to extract required information',\r\n          JSON.stringify(props.downloads[arcId]));\r\n      } else {\r\n        log('warn', 'failed to extract required information - download archive missing', arcId);\r\n      }\r\n      continue;\r\n    }\r\n\r\n    const allowAutoEnable = props.state.settings.automation.enable;\r\n    const nexusDownload: INexusDownloadInfo = {\r\n      archiveName: props.downloads[arcId].localPath,\r\n      downloadIds: ids,\r\n      allowAutoInstall: true,\r\n      allowAutoEnable,\r\n      rules: modData.rules.filter(rule =>\r\n        includedModIds.includes(rule.reference.id)),\r\n    };\r\n    nexusDownloads.push(nexusDownload);\r\n  }\r\n\r\n  const timestamp = new Date();\r\n  api.sendNotification({\r\n    id: 'mod-dependency-manifest',\r\n    type: 'success',\r\n    message: 'Dependency information created',\r\n    actions: [\r\n      {\r\n        title: 'Save to file', action: async () => {\r\n          await fs.ensureDirWritableAsync(MANIFESTS_PATH);\r\n          const tmpPath = path.join(MANIFESTS_PATH, `${formatTime(timestamp)}${DEP_MAN_SUFFIX}`);\r\n          await fs.writeFileAsync(tmpPath, JSON.stringify(nexusDownloads, undefined, 2));\r\n          util.opn(MANIFESTS_PATH).catch(() => null);\r\n        },\r\n      },\r\n      {\r\n        title: 'Copy to clipboard',\r\n        action: () => clipboard.writeText(JSON.stringify(nexusDownloads, undefined, 2)),\r\n      },\r\n    ],\r\n  });\r\n}\r\n\r\nexport default init;\r\n","import { types, util } from 'vortex-api';\r\n\r\nimport * as actions from '../actions/persistent';\r\n\r\nconst persistentReducer: types.IReducerSpec = {\r\n  reducers: {\r\n    [actions.setFulfillerSubscription as any]: (state, payload) => {\r\n      const { profileId, subId } = payload;\r\n      return util.setSafe(state, [profileId, 'subId'], subId);\r\n    },\r\n    [actions.clearFulfillerSubscription as any]: (state, payload) => {\r\n      const { profileId } = payload;\r\n      return util.setSafe(state, [profileId, 'subId'], undefined);\r\n    },\r\n  },\r\n  defaults: {},\r\n};\r\n\r\nexport default persistentReducer;\r\n","import { types, util } from 'vortex-api';\r\n\r\nimport * as actions from '../actions/session';\r\n\r\nconst sessionReducer: types.IReducerSpec = {\r\n  reducers: {\r\n    [actions.setOpenProfileSelect as any]: (state, payload) => {\r\n      return util.setSafe(state, ['open'], payload);\r\n    },\r\n    [actions.setProfileUserData as any]: (state, payload) => {\r\n      return util.setSafe(state, ['userData'], payload);\r\n    },\r\n    [actions.setUserDataFilePath as any]: (state, payload) => {\r\n      return util.setSafe(state, ['userDataFilePath'], payload);\r\n    },\r\n  },\r\n  defaults: {\r\n    open: false,\r\n    userData: {},\r\n    userDataFilePath: '',\r\n  },\r\n};\r\n\r\nexport default sessionReducer;\r\n","import { types, util } from 'vortex-api';\r\n\r\nimport * as actions from '../actions/settings';\r\n\r\nconst settingsReducer: types.IReducerSpec = {\r\n  reducers: {\r\n    [actions.setAutoFulfillDependencies as any]: (state, payload) => {\r\n      return util.setSafe(state, ['autofulfill'], payload);\r\n    },\r\n    [actions.setEnableDebugMode as any]: (state, payload) => {\r\n      return util.setSafe(state, ['fulfillerDebugMode'], payload);\r\n    },\r\n    [actions.setReadNonPremiumNotif as any]: (state, payload) => {\r\n      return util.setSafe(state, ['readNonPremiumNotification'], payload);\r\n    },\r\n    [actions.setLockSub as any]: (state, payload) => {\r\n      return util.setSafe(state, ['lockSub'], payload);\r\n    },\r\n    [actions.addUrlSub as any]: (state, payload) => {\r\n      const path = ['urlSubscriptions'];\r\n      const copy = [].concat(util.getSafe(state, path, []), [payload]);\r\n      return util.setSafe(state, path, copy);\r\n    },\r\n    [actions.removeUrlSub as any]: (state, payload) => {\r\n      const path = ['urlSubscriptions'];\r\n      const res = util.removeValueIf(state, path, sub => sub.id === payload);\r\n      return res;\r\n    },\r\n    [actions.setUrlSub as any]: (state, payload) => {\r\n      const path = ['urlSubscriptions'];\r\n      let copy = util.getSafe(state, path, []);\r\n      const idx = copy.findIndex(sub => sub.id === payload.id);\r\n      if (idx === -1) {\r\n        return state;\r\n      }\r\n      copy.splice(idx, 1, payload.urlSub);\r\n      return util.setSafe(state, path, copy);\r\n    },\r\n  },\r\n  defaults: {\r\n    autofulfill: false,\r\n    lockSub: false,\r\n    fulfillerDebugMode: false,\r\n    readNonPremiumNotification: false,\r\n    urlSubscriptions: [],\r\n  },\r\n};\r\n\r\nexport default settingsReducer;\r\n","import { types } from 'vortex-api';\r\n\r\nexport class TimeoutError extends Error {\r\n  constructor(modId: string) {\r\n    super(`${modId}: Dependency operation timed out`);\r\n    this.name = 'TimeoutError';\r\n  }\r\n}\r\n\r\nexport class NotPremiumError extends Error {\r\n  constructor() {\r\n    super('Only available to premium users');\r\n    this.name = 'NotPremiumError';\r\n  }\r\n}\r\n\r\nexport interface IProps {\r\n  state: types.IState;\r\n  profile: types.IProfile;\r\n  mods: { [modId: string]: types.IMod };\r\n  downloads: { [dlId: string]: types.IDownload };\r\n}\r\n\r\nexport interface IDownloadIds {\r\n  gameId: string;\r\n  fileId: string;\r\n  modId: string;\r\n}\r\n\r\nexport interface INexusDownloadInfo {\r\n  downloadIds: IDownloadIds;\r\n  archiveName: string;\r\n  allowAutoInstall?: boolean;\r\n  allowAutoEnable?: boolean;\r\n  rules: types.IModRule[];\r\n}\r\n\r\nexport interface IExtractedModData {\r\n  modId: string;\r\n  archiveId: string;\r\n  rules: types.IModRule[];\r\n}\r\n\r\nexport interface IProfileData {\r\n  id: string;\r\n  gameId: string;\r\n  enabledModIds: string[];\r\n}\r\n\r\nexport interface IUrlSub {\r\n  id: string;\r\n  name: string;\r\n  url: string;\r\n}\r\n","import Bluebird from 'bluebird';\r\nimport { ILookupResult } from 'modmeta-db';\r\nimport path from 'path';\r\nimport { actions, fs, selectors, types, util } from 'vortex-api';\r\n\r\nimport { MANIFESTS_PATH, SUB_FILE } from './common';\r\nimport { IDownloadIds, IProps } from './types';\r\n\r\n// We _should_ just export this from vortex-api, but I guess it's not wise to make it\r\n//  easy for users since we want to move away from bluebird in the future ?\r\nexport function toBlue<T>(func: (...args: any[]) => Promise<T>): (...args: any[]) => Bluebird<T> {\r\n  return (...args: any[]) => Bluebird.resolve(func(...args));\r\n}\r\n\r\nconst convertableNames = {\r\n  skyrimspecialedition: 'skyrimse',\r\n  newvegas: 'falloutnv',\r\n  elderscrollsonline: 'teso',\r\n}\r\n\r\nexport function convertGameDomain(gameId: string) {\r\n  return (convertableNames[gameId] !== undefined)\r\n    ? convertableNames[gameId] : gameId;\r\n}\r\n\r\nexport function genProps(api: types.IExtensionApi, profileId?: string): IProps {\r\n  const state = api.getState();\r\n  const profile = (profileId !== undefined)\r\n    ? selectors.profileById(state, profileId)\r\n    : selectors.activeProfile(state);\r\n  if (profile?.gameId === undefined) {\r\n    return undefined;\r\n  }\r\n  const mods = util.getSafe(state, ['persistent', 'mods', profile.gameId], {});\r\n  const downloads = util.getSafe(state, ['persistent', 'downloads', 'files'], {});\r\n  return { state, profile, mods, downloads };\r\n}\r\n\r\nexport async function resolveIdsUsingMD5(api: types.IExtensionApi, downloadId: string): Promise<IDownloadIds> {\r\n  const state = api.getState();\r\n  let ids: IDownloadIds;\r\n  const download = util.getSafe(state, ['persistent', 'downloads', 'files', downloadId], undefined);\r\n  if (download === undefined) {\r\n    return undefined;\r\n  }\r\n\r\n  if (download.fileMD5 !== undefined) {\r\n    const gameId = Array.isArray(download.game) ? download.game[0] : download.game;\r\n    const downloadPath = selectors.downloadPathForGame(api.getState(), gameId);\r\n    const modInfo: ILookupResult[] = await api.lookupModMeta({\r\n      fileMD5: download.fileMD5,\r\n      filePath: path.join(downloadPath, download.localPath),\r\n      gameId,\r\n      fileSize: download.size,\r\n    }, true);\r\n    if (modInfo.length > 0) {\r\n      const info = modInfo[0].value;\r\n      const setInfo = (key: string, value: any) => {\r\n        if (value !== undefined) {\r\n          api.store.dispatch(actions.setDownloadModInfo(downloadId, key, value)); }\r\n      };\r\n\r\n      try {\r\n        const rgx = /\\/mods\\/(\\d+)\\/files\\/(\\d+)/i;\r\n        let parsed: URL;\r\n        try {\r\n          parsed = new URL(info.sourceURI);\r\n        } catch (err) {\r\n          return undefined;\r\n        }\r\n        const matches = parsed.pathname.match(rgx);\r\n        if ((parsed.protocol !== 'nxm:') || (matches === null) || (matches.length !== 3)) {\r\n          return undefined;\r\n        }\r\n\r\n        const domainName = info.domainName;\r\n        const modId = matches[1];\r\n        const fileId = matches[2];\r\n\r\n        ids = { gameId, modId: modId.toString(), fileId: fileId.toString() };\r\n\r\n        // The state should have this information!\r\n        setInfo('source', 'nexus');\r\n        setInfo('nexus.ids.gameId', domainName);\r\n        setInfo('nexus.ids.fileId', fileId);\r\n        setInfo('nexus.ids.modId', modId);\r\n      } catch (err) {\r\n        // failed to parse the uri as an nxm link - that's not an error in this case, if\r\n        // the meta server wasn't nexus mods this is to be expected\r\n      }\r\n\r\n      setInfo('meta', info);\r\n    }\r\n  }\r\n\r\n  return Promise.resolve(ids);\r\n}\r\n\r\nexport function extractIds(download: types.IDownload): IDownloadIds {\r\n  if (download === undefined) {\r\n    return undefined;\r\n  }\r\n  const isValid = (ids: IDownloadIds) => (ids?.fileId !== undefined && ids?.gameId !== undefined && ids?.modId !== undefined);\r\n  let ids: IDownloadIds = util.getSafe(download.modInfo, ['nexus', 'ids'], undefined);\r\n  if (isValid(ids)) {\r\n    return ids;\r\n  }\r\n  const meta = util.getSafe(download.modInfo, ['meta', 'details'], undefined);\r\n  if (meta?.fileId !== undefined) {\r\n    ids = { fileId: meta.fileId, modId: meta.modId, gameId: download.game[0] };\r\n    if (isValid(ids)) {\r\n      return ids;\r\n    }\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\nexport function isPremium(api: types.IExtensionApi) {\r\n  const state: types.IState = api.getState();\r\n  return util.getSafe(state, ['persistent', 'nexus', 'userInfo', 'isPremium'], false);\r\n}\r\n\r\nexport function formatTime(input: Date): string {\r\n  return [\r\n    input.getFullYear(),\r\n    util.pad(input.getMonth(), '0', 2),\r\n    util.pad(input.getDay(), '0', 2),\r\n    util.pad(input.getHours(), '0', 2),\r\n    util.pad(input.getMinutes(), '0', 2),\r\n  ].join('-');\r\n}\r\n\r\nexport function compareIds(lhs: IDownloadIds, rhs: IDownloadIds): boolean {\r\n  if (lhs?.fileId === undefined || rhs?.fileId === undefined) {\r\n    return false;\r\n  }\r\n\r\n  if (genIdentifier(lhs) === genIdentifier(rhs)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function genIdentifier(ids: IDownloadIds): string {\r\n  if (ids === undefined) {\r\n    return undefined;\r\n  }\r\n\r\n  return `${ids.fileId}_${ids.modId}_${ids.gameId}`;\r\n}\r\n\r\nexport function disableAllMods(api: types.IExtensionApi) {\r\n  const state = api.getState();\r\n  const activeProfile = selectors.activeProfile(state);\r\n  const mods: { [modId: string]: types.IMod } = util.getSafe(state,\r\n    ['persistent', 'mods', activeProfile.gameId], {});\r\n  for (const modId of Object.keys(mods)) {\r\n    api.store.dispatch(actions.setModEnabled(activeProfile.id, modId, false));\r\n  }\r\n}\r\n\r\nexport async function fetchDepFromUrl(url: string) {\r\n  const dest = path.join(MANIFESTS_PATH, SUB_FILE);\r\n  try {\r\n    const res = await fetch(url);\r\n    const buffer = await res.arrayBuffer();\r\n    await fs.ensureDirWritableAsync(MANIFESTS_PATH);\r\n    await fs.writeFileAsync(dest, Buffer.from(buffer));\r\n  } catch (err) {\r\n    return Promise.reject(err);\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { Button, MenuItem, SplitButton } from 'react-bootstrap';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { connect } from 'react-redux';\r\nimport * as Redux from 'redux';\r\nimport { ComponentEx, Modal, More, Toggle, types, util } from 'vortex-api';\r\n\r\nimport { setOpenProfileSelect } from '../actions/session';\r\n\r\nimport { IProfileData } from '../types';\r\n\r\ninterface IBaseProps {\r\n  onSelectProfile: (profileData: IProfileData) => void;\r\n}\r\n\r\ninterface IConnectedProps {\r\n  profileData: { [profileId: string]: IProfileData };\r\n  open: boolean;\r\n}\r\n\r\ninterface IActionProps {\r\n  onSetOpen: (open: boolean) => void;\r\n}\r\n\r\ninterface IComponentState {\r\n  selectedProfileId: string;\r\n}\r\n\r\ntype IProps = IBaseProps & IConnectedProps & IActionProps;\r\n\r\nclass ProfileSelectionDialog extends ComponentEx<IProps, IComponentState> {\r\n  constructor(props: IProps) {\r\n    super(props);\r\n    this.initState({\r\n      selectedProfileId: undefined,\r\n    });\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { t, profileData, open } = this.props;\r\n    const { selectedProfileId } = this.state;\r\n    const profileIds = Object.keys(profileData);\r\n    const title = selectedProfileId !== undefined\r\n      ? `${selectedProfileId} - ${profileData[selectedProfileId].gameId} (enabled: ${profileData[selectedProfileId].enabledModIds.length})`\r\n      : 'Select Profile';\r\n    return (\r\n      <Modal id='import-select-profile' show={open} onHide={this.close}>\r\n        <Modal.Header>\r\n          <h4> {t('Select a Profile')} </h4>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          {t('Select the profile you wish to import from:')}\r\n          <br />\r\n          <SplitButton\r\n            id='import-select-profile'\r\n            title={title}\r\n            onSelect={this.selectProfileId}\r\n          >\r\n            {profileIds.map(this.renderProfile)}\r\n          </SplitButton>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button onClick={this.close}>{'Close'}</Button>\r\n          <Button onClick={this.onClick}>{'Import From Profile'}</Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    );\r\n  }\r\n\r\n  private onClick = () => {\r\n    if (!!this.state.selectedProfileId) {\r\n      this.props.onSelectProfile(this.props.profileData[this.state.selectedProfileId]);\r\n    }\r\n\r\n    this.props.onSetOpen(false);\r\n  }\r\n\r\n  private close = () => {\r\n    this.props.onSetOpen(false);\r\n  }\r\n\r\n  private renderProfile = (profId: string) => {\r\n    const { profileData } = this.props;\r\n    const text = `${profId} - ${profileData[profId].gameId} (enabled: ${profileData[profId].enabledModIds.length})`;\r\n    return <MenuItem key={profId} eventKey={profId}>{text}</MenuItem>;\r\n  }\r\n\r\n  private selectProfileId = (eventKey) => {\r\n    this.nextState.selectedProfileId = eventKey;\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Redux.Dispatch<any>): IActionProps {\r\n  return {\r\n    onSetOpen: (open) => dispatch(setOpenProfileSelect(open)),\r\n  };\r\n}\r\n\r\nfunction mapStateToProps(state: types.IState): IConnectedProps {\r\n  return {\r\n    open: util.getSafe(state, ['session', 'depfulfiller', 'open'], false),\r\n    profileData: util.getSafe(state, ['session', 'depfulfiller', 'userData'], {}),\r\n  };\r\n}\r\n\r\nexport default withTranslation(['common', 'dependency-fulfiller'])(\r\n  connect(mapStateToProps, mapDispatchToProps)(\r\n    ProfileSelectionDialog) as any) as React.ComponentClass<IBaseProps>;\r\n","import * as React from 'react';\r\nimport { ControlLabel } from 'react-bootstrap';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { connect } from 'react-redux';\r\nimport * as Redux from 'redux';\r\nimport { ComponentEx, More, Toggle, types, util } from 'vortex-api';\r\n\r\nimport UrlSubscriber from './UrlSubscriber';\r\n\r\nimport { setAutoFulfillDependencies, setEnableDebugMode } from '../actions/settings';\r\nimport { DEP_MAN_SUFFIX } from '../common';\r\n\r\ninterface IConnectedProps {\r\n  autoFulfill: boolean;\r\n  debugMode: boolean;\r\n}\r\n\r\ninterface IActionProps {\r\n  onSetAutoFulfillDependencies: (fulfill: boolean) => void;\r\n  onSetEnableDebugMode: (debug: boolean) => void;\r\n}\r\n\r\ntype IProps = IActionProps & IConnectedProps;\r\n\r\nclass Settings extends ComponentEx<IProps, {}> {\r\n  public render(): JSX.Element {\r\n    return (\r\n      <div>\r\n        {this.renderToggles()}\r\n        <UrlSubscriber/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderToggles(): JSX.Element {\r\n    const { t, autoFulfill } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <ControlLabel>{t('Dependency Fulfillment')}</ControlLabel>\r\n        <Toggle\r\n          checked={autoFulfill}\r\n          onToggle={this.toggle}\r\n        >\r\n          {t('Fulfill mod dependencies automatically on mod installation')}\r\n          <More id='dep-fulfill-info' name='On Install Dependency Fulfiller'>\r\n          {t('If checked, Vortex will search the new mod\\'s installation folder for files with the '\r\n            + '\"{{suffix}}\" suffix and attempt to install any mod dependencies defined in that '\r\n            + 'file. (Obviously this will only work if the mod author included such a file with his '\r\n            + 'mod in the first place)', { replace: { suffix: DEP_MAN_SUFFIX } })}\r\n          </More>\r\n        </Toggle>\r\n        <Toggle\r\n          checked={this.props.debugMode}\r\n          onToggle={this.enableDebugMode}\r\n        >\r\n          {t('Enable ability to import dependencies from application state backups')}\r\n          <More id='dep-fulfill-info2' name='Debug Mode'>\r\n          {t('If checked, Vortex will enable an additional import button which is configured '\r\n           + 'to use application state backups - this is intended to be used by Vortex developers '\r\n           + 'to re-create user mods setup for debugging purposes - use at own risk!', { replace: { suffix: DEP_MAN_SUFFIX } })}\r\n          </More>\r\n        </Toggle>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private enableDebugMode = (enabled: boolean) => {\r\n    const { onSetEnableDebugMode } = this.props;\r\n    onSetEnableDebugMode(enabled);\r\n  }\r\n  private toggle = (enabled: boolean) => {\r\n    const { onSetAutoFulfillDependencies } = this.props;\r\n    onSetAutoFulfillDependencies(enabled);\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state: types.IState): IConnectedProps {\r\n  return {\r\n    autoFulfill: util.getSafe(state, ['settings', 'interface', 'autofulfill'], false),\r\n    debugMode: util.getSafe(state, ['settings', 'interface', 'fulfillerDebugMode'], false),\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Redux.Dispatch<any>): IActionProps {\r\n  return {\r\n    onSetAutoFulfillDependencies: (fulfill: boolean) =>\r\n      dispatch(setAutoFulfillDependencies(fulfill)),\r\n    onSetEnableDebugMode: (debugMode: boolean) =>\r\n      dispatch(setEnableDebugMode(debugMode)),\r\n  };\r\n}\r\n\r\nexport default withTranslation(['common', 'dependency-fulfiller'])(\r\n  connect(mapStateToProps, mapDispatchToProps)(\r\n    Settings) as any) as React.ComponentClass<{}>;\r\n","import * as React from 'react';\r\nimport { Button, ControlLabel, FormControl, FormGroup, InputGroup } from 'react-bootstrap';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { connect } from 'react-redux';\r\nimport * as Redux from 'redux';\r\nimport { ComponentEx, FlexLayout, Icon, More, selectors, Toggle, tooltip, types, util } from 'vortex-api';\r\n\r\nimport { generate } from 'shortid';\r\n\r\nimport { IUrlSub } from '../types';\r\n\r\nimport { clearFulfillerSubscription, setFulfillerSubscription } from '../actions/persistent';\r\nimport {\r\n  addUrlSub, removeUrlSub, setAutoFulfillDependencies,\r\n  setEnableDebugMode, setLockSub, setUrlSub,\r\n} from '../actions/settings';\r\n\r\nimport { DEP_MAN_SUFFIX } from '../common';\r\n\r\ninterface IConnectedProps {\r\n  lockSub: boolean;\r\n  subId: string;\r\n  profile: types.IProfile;\r\n  availableSubs: IUrlSub[];\r\n}\r\n\r\ninterface IActionProps {\r\n  onSetLock: (lock: boolean) => void;\r\n  onAddSub: (sub: IUrlSub) => void;\r\n  onRemoveSub: (id: string) => void;\r\n  onEditSub: (id: string, sub: IUrlSub) => void;\r\n  onSetSubscription: (profileId: string, subId: string) => void;\r\n  onClearSubscription: (profileId: string) => void;\r\n}\r\n\r\ninterface IComponentState {\r\n  selectedUrlSubId: string;\r\n}\r\n\r\ntype IProps = IActionProps & IConnectedProps;\r\n\r\nclass UrlSubscriber extends ComponentEx<IProps, IComponentState> {\r\n  private mNone: IUrlSub = {\r\n    id: 'none',\r\n    name: 'No Subscription',\r\n    url: 'none',\r\n  };\r\n  constructor(props: IProps) {\r\n    super(props);\r\n    this.initState({\r\n      selectedUrlSubId: undefined,\r\n    });\r\n  }\r\n\r\n  public componentDidMount() {\r\n    const { subId } = this.props;\r\n    this.nextState.selectedUrlSubId = subId;\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { t, lockSub, subId, availableSubs } = this.props;\r\n    const { selectedUrlSubId } = this.state;\r\n    const sub = this.getSub(selectedUrlSubId);\r\n    const title = (sub?.name !== undefined) ? sub.name : 'Select URL';\r\n    return (\r\n      <FormGroup id='fulfiller-subscribe-url-select'>\r\n        <ControlLabel>\r\n          {t('Select a URL you wish to subscribe to ')}\r\n          <More id='more-fulfiller-subs' name={t('Subscribed Url')} >\r\n            {t('Use the buttons below to Add/Remove/Edit a subscription. '\r\n             + 'The Dependency Fulfiller will use the selected subscription to fetch '\r\n             + 'dependency data and attempt to download the required mods from the URL '\r\n             + 'specified by the subscription when clicking the \"Import From Subscription\" '\r\n             + 'button in the mods page.')}\r\n          </More>\r\n        </ControlLabel>\r\n        <FlexLayout type='row'>\r\n          <FlexLayout.Fixed>\r\n            <InputGroup style={{ padding: '0px 0px 0px 2px' }}>\r\n              <FormControl\r\n                componentClass='select'\r\n                onChange={this.selectSub}\r\n                value={selectedUrlSubId}\r\n              >\r\n                {[].concat(this.mNone, availableSubs).map(this.renderSubUrl)}\r\n              </FormControl>\r\n            </InputGroup>\r\n          </FlexLayout.Fixed>\r\n          <FlexLayout.Fixed>\r\n            <InputGroup.Button style={{ padding: '0px 2px 0px 6px' }}>\r\n              <tooltip.Button\r\n                tooltip={t('Add New Subscription')}\r\n                onClick={this.subEditorDialog}\r\n              >\r\n                <Icon name='add' />\r\n              </tooltip.Button>\r\n            </InputGroup.Button>\r\n            <InputGroup.Button style={{ padding: '0px 2px 0px 2px' }}>\r\n              <tooltip.Button\r\n                tooltip={t('Remove Subscription')}\r\n                onClick={this.removeSub}\r\n                disabled={selectedUrlSubId === undefined}\r\n              >\r\n                <Icon name='remove' />\r\n              </tooltip.Button>\r\n            </InputGroup.Button>\r\n            <InputGroup.Button style={{ padding: '0px 2px 0px 2px' }}>\r\n              <tooltip.Button\r\n                data-id={selectedUrlSubId}\r\n                tooltip={t('Edit Subscription')}\r\n                onClick={this.subEditorDialog}\r\n                disabled={selectedUrlSubId === undefined}\r\n              >\r\n                <Icon name='show' />\r\n              </tooltip.Button>\r\n            </InputGroup.Button>\r\n          </FlexLayout.Fixed>\r\n        </FlexLayout>\r\n        <Toggle\r\n          checked={lockSub}\r\n          onToggle={this.toggleLock}\r\n        >\r\n          {t('Lock your mod list to the assigned subscription')}\r\n          <More id='dep-lock-info' name='Lock Subscription'>\r\n          {t('If toggled and a valid subscription is selected, Vortex will '\r\n           + 'automatically disable mods that are not part of the dependency data '\r\n           + 'it downloads from the URL defined by the subscription. All dependencies '\r\n           + 'will be automatically enabled upon their successful installation.',\r\n           { replace: { suffix: DEP_MAN_SUFFIX } })}\r\n          </More>\r\n        </Toggle>\r\n      </FormGroup>\r\n    );\r\n  }\r\n\r\n  private removeSub = () => {\r\n    const { selectedUrlSubId } = this.state;\r\n    const { onRemoveSub, profile, onClearSubscription } = this.props;\r\n    onRemoveSub(selectedUrlSubId);\r\n    onClearSubscription(profile.id);\r\n  }\r\n\r\n  private nop = () => null;\r\n  private renderSubUrl = (sub: IUrlSub) => {\r\n    return <option\r\n      key={sub.id}\r\n      value={sub.id}\r\n      data-id={sub.id}\r\n    >\r\n      {sub.name}\r\n    </option>;\r\n  }\r\n\r\n  private selectSub = (evt) => {\r\n    const { profile, onSetSubscription } = this.props;\r\n    const subId: string = evt.target.selectedOptions[0]?.getAttribute('data-id');\r\n    if (subId === 'none') {\r\n      this.nextState.selectedUrlSubId = undefined;\r\n      onSetSubscription(profile.id, undefined);\r\n    } else {\r\n      this.nextState.selectedUrlSubId = subId;\r\n      onSetSubscription(profile.id, subId);\r\n    }\r\n  }\r\n\r\n  private toggleLock = (lock: boolean) => {\r\n    const { onSetLock } = this.props;\r\n    onSetLock(lock);\r\n  }\r\n\r\n  private getSub(id: string) {\r\n    const { availableSubs } = this.props;\r\n    return availableSubs.find(sub => sub.id === id);\r\n  }\r\n\r\n  private subEditorDialog = async (evt) => {\r\n    const id = evt.currentTarget.getAttribute('data-id');\r\n    const { onEditSub, onAddSub } = this.props;\r\n    const sub: IUrlSub = this.getSub(id);\r\n    const res = await this.context.api.showDialog('info', 'Create/Edit URL Subscription',\r\n    {\r\n      text: 'Please type in a human readable name for this subscription and a valid URL '\r\n          + 'from which the dependencies JSON can be fetched.',\r\n      input: [\r\n        { id: 'name', type: 'text', value: sub?.name, placeholder: 'A unique name to identify this url by' },\r\n        { id: 'url', type: 'text', value: sub?.url, placeholder: 'https://www.pathtoajsonfile.com/file.json' },\r\n      ],\r\n    }, [\r\n      { label: 'Cancel' },\r\n      { label: 'Save' },\r\n    ]);\r\n\r\n    if (res.action === 'Save') {\r\n      const name = res.input['name'];\r\n      let url;\r\n      try {\r\n        url = new URL(res.input['url']);\r\n      } catch (err) {\r\n        this.context.api.showErrorNotification('Invalid URL - try again', err,\r\n          { allowReport: false });\r\n        return;\r\n      }\r\n\r\n      const newSub: IUrlSub = {\r\n        id: sub?.id !== undefined ? sub.id : generate(),\r\n        name,\r\n        url,\r\n      };\r\n\r\n      if (sub !== undefined) {\r\n        onEditSub(sub.id, newSub);\r\n      } else {\r\n        onAddSub(newSub);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state: types.IState): IConnectedProps {\r\n  const profile = selectors.activeProfile(state);\r\n  return {\r\n    profile,\r\n    subId: util.getSafe(state, ['persistent', 'depfulfiller', profile.id, 'subId'], undefined),\r\n    lockSub: util.getSafe(state, ['settings', 'interface', 'lockSub'], false),\r\n    availableSubs: util.getSafe(state, ['settings', 'interface', 'urlSubscriptions'], []),\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Redux.Dispatch<any>): IActionProps {\r\n  return {\r\n    onSetLock: (lock: boolean) => dispatch(setLockSub(lock)),\r\n    onAddSub: (sub: IUrlSub) => dispatch(addUrlSub(sub)),\r\n    onEditSub: (id: string, sub: IUrlSub) => dispatch(setUrlSub(id, sub)),\r\n    onRemoveSub: (id: string) => dispatch(removeUrlSub(id)),\r\n    onSetSubscription: (profileId: string, subId: string) =>\r\n      dispatch(setFulfillerSubscription(profileId, subId)),\r\n    onClearSubscription: (profileId: string) =>\r\n      dispatch(clearFulfillerSubscription(profileId)),\r\n  };\r\n}\r\n\r\nexport default withTranslation(['common', 'dependency-fulfiller'])(\r\n  connect(mapStateToProps, mapDispatchToProps)(\r\n    UrlSubscriber) as any) as React.ComponentClass<{}>;\r\n","module.exports = require(\"bluebird\");","module.exports = require(\"electron\");","module.exports = require(\"lodash\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-bootstrap\");","module.exports = require(\"react-i18next\");","module.exports = require(\"react-redux\");","module.exports = require(\"redux-act\");","module.exports = require(\"timers\");","module.exports = require(\"turbowalk\");","module.exports = require(\"vortex-api\");"],"sourceRoot":""}