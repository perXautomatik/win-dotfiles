{"version":3,"sources":["webpack://sample-extension/webpack/bootstrap","webpack://sample-extension/./src/actions/actions.ts","webpack://sample-extension/./src/index.ts","webpack://sample-extension/./src/reducers/reducers.ts","webpack://sample-extension/./src/util/gameSupport.ts","webpack://sample-extension/./src/util/util.ts","webpack://sample-extension/./src/views/IniEditor.tsx","webpack://sample-extension/external \"path\"","webpack://sample-extension/external \"react\"","webpack://sample-extension/external \"react-bootstrap\"","webpack://sample-extension/external \"react-i18next\"","webpack://sample-extension/external \"react-redux\"","webpack://sample-extension/external \"react-select\"","webpack://sample-extension/external \"redux-act\"","webpack://sample-extension/external \"vortex-api\""],"names":[],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFa;AACb,8CAA8C,cAAc;AAC5D;AACA,oBAAoB,mBAAO,CAAC,4BAAW;AACvC,qGAAqG,eAAe;AACpH,2GAA2G,eAAe;;;;;;;;;;;;;ACL7G;AACb,8CAA8C,cAAc;AAC5D,qBAAqB,mBAAO,CAAC,8BAAY;AACzC,aAAa,mBAAO,CAAC,kBAAM;AAC3B,oBAAoB,mBAAO,CAAC,oDAAmB;AAC/C,sBAAsB,mBAAO,CAAC,qDAAoB;AAClD,mBAAmB,mBAAO,CAAC,uDAAqB;AAChD;AACA;AACA;AACA,sDAAsD;AACtD;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;;AClBa;AACb,8CAA8C,cAAc;AAC5D;AACA,gBAAgB,mBAAO,CAAC,oDAAoB;AAC5C,qBAAqB,mBAAO,CAAC,8BAAY;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;;;;;;;;;;;;;ACvBa;AACb,8CAA8C,cAAc;AAC5D;AACA,qBAAqB,mBAAO,CAAC,8BAAY;AACzC,aAAa,mBAAO,CAAC,kBAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,wBAAwB,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,SAAS;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3Ha;AACb;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA,8CAA8C,cAAc;AAC5D;AACA,qBAAqB,mBAAO,CAAC,8BAAY;AACzC,aAAa,mBAAO,CAAC,kBAAM;AAC3B;AACA;AACA;AACA;AACA,gCAAgC,wCAAwC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,wEAAwE,mBAAmB;AAC3F;AACA;AACA;AACA;AACA,4EAA4E,gBAAgB;AAC5F;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,YAAY;AACrF;AACA;AACA,KAAK;AACL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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.deleteCustomConfigPath = exports.addCustomConfigPath = void 0;\r\nconst redux_act_1 = require(\"redux-act\");\r\nexports.addCustomConfigPath = redux_act_1.createAction('ADD_CUSTOM_CONFIG_PATH', (gameId, path) => ({ gameId, path }));\r\nexports.deleteCustomConfigPath = redux_act_1.createAction('DELETE_CUSTOM_CONFIG_PATH', (gameId, path) => ({ gameId, path }));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vortex_api_1 = require(\"vortex-api\");\r\nconst path = require(\"path\");\r\nconst IniEditor_1 = require(\"./views/IniEditor\");\r\nconst gameSupport_1 = require(\"./util/gameSupport\");\r\nconst reducers_1 = require(\"./reducers/reducers\");\r\nfunction main(context) {\r\n    context.registerReducer(['settings', 'ini-editor'], reducers_1.IniEditorReducer);\r\n    context.registerDialog('ini-editor', IniEditor_1.default);\r\n    context.registerAction('mod-icons', 25, 'mods', {}, 'INI Editor', () => {\r\n        context.api.store.dispatch(vortex_api_1.actions.setDialogVisible('ini-editor'));\r\n    }, () => gameSupport_1.gameHasIniFiles(context.api));\r\n    context.once(() => {\r\n        context.api.setStylesheet('ini-editor', path.join(__dirname, 'ini-editor.scss'));\r\n    });\r\n    return true;\r\n}\r\nexports.default = main;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IniEditorReducer = void 0;\r\nconst actions = require(\"../actions/actions\");\r\nconst vortex_api_1 = require(\"vortex-api\");\r\nconst IniEditorReducer = {\r\n    reducers: {\r\n        [actions.addCustomConfigPath]: (state, payload) => {\r\n            let current = vortex_api_1.util.getSafe(state, [payload.gameId, 'filePaths'], []);\r\n            if (!current.includes(payload.path))\r\n                current.push(payload.path);\r\n            return vortex_api_1.util.setSafe(state, [payload.gameId, 'filePaths'], current);\r\n        },\r\n        [actions.deleteCustomConfigPath]: (state, payload) => {\r\n            let current = vortex_api_1.util.getSafe(state, [payload.gameId, 'filePaths'], []);\r\n            let index = current.indexOf(payload.path);\r\n            if (index > -1)\r\n                current.splice(index, 1);\r\n            return vortex_api_1.util.setSafe(state, [payload.gameId, 'filePaths'], current);\r\n        },\r\n    },\r\n    defaults: {}\r\n};\r\nexports.IniEditorReducer = IniEditorReducer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getGameInis = exports.gameHasIniFiles = void 0;\r\nconst vortex_api_1 = require(\"vortex-api\");\r\nconst path = require(\"path\");\r\nconst gameSupport = {\r\n    \"skyrim\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim', 'Skyrim.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim', 'SkyrimPrefs.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim', 'SkyrimCustom.ini')\r\n        ]\r\n    },\r\n    \"skyrimse\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim Special Edition', 'Skyrim.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim Special Edition', 'SkyrimPrefs.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim Special Edition', 'SkyrimCustom.ini')\r\n        ]\r\n    },\r\n    \"skyrimVR\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim VR', 'Skyrim.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim VR', 'SkyrimVR.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim VR', 'SkyrimPrefs.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim VR', 'SkyrimCustom.ini')\r\n        ]\r\n    },\r\n    \"fallout4\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout4', 'Fallout4.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout4', 'Fallout4Prefs.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout4', 'Fallout4Custom.ini')\r\n        ]\r\n    },\r\n    \"fallout4vr\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout4VR', 'Fallout4.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout4VR', 'Fallout4Prefs.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout4VR', 'Fallout4Custom.ini')\r\n        ]\r\n    },\r\n    \"falloutnv\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'FalloutNV', 'Fallout.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'FalloutNV', 'FalloutPrefs.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'FalloutNV', 'FalloutCustom.ini'),\r\n        ]\r\n    },\r\n    \"fallout3\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout3', 'Fallout.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout3', 'FalloutPrefs.ini'),\r\n        ]\r\n    },\r\n    \"oblivion\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Oblivion', 'Oblivion.ini'),\r\n        ]\r\n    },\r\n    \"enderal\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Enderal', 'Enderal.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Enderal', 'EnderalPrefs.ini'),\r\n        ]\r\n    },\r\n    \"enderalspecialedition\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Enderal', 'Enderal.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Enderal', 'EnderalPrefs.ini'),\r\n        ]\r\n    },\r\n    \"morrowind\": {\r\n        filePaths: [\r\n            path.join('{gamepath}', 'Morrowind.ini')\r\n        ]\r\n    }\r\n};\r\nconst xboxGamePassSupport = {\r\n    \"skyrimse\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim Special Edition MS', 'Skyrim.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim Special Edition MS', 'SkyrimPrefs.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Skyrim Special Edition MS', 'SkyrimCustom.ini')\r\n        ]\r\n    },\r\n    \"fallout4\": {\r\n        filePaths: [\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout4 MS', 'Fallout4.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout4 MS', 'Fallout4Prefs.ini'),\r\n            path.join(vortex_api_1.util.getVortexPath('documents'), 'My Games', 'Fallout4 MS', 'Fallout4Custom.ini')\r\n        ]\r\n    },\r\n};\r\nfunction getGameInis(gameId, state) {\r\n    if (!gameId)\r\n        return undefined;\r\n    const discovery = vortex_api_1.util.getSafe(state, ['settings', 'gameMode', 'discovered', gameId], undefined);\r\n    const game = vortex_api_1.util.getGame(gameId);\r\n    const ini = vortex_api_1.util.getSafe(game, ['iniFiles'], undefined);\r\n    let iniFiles = ini ? ini(state) : gameSupport[gameId];\r\n    if ((discovery === null || discovery === void 0 ? void 0 : discovery.path) && isXboxPath(discovery.path))\r\n        iniFiles = xboxGamePassSupport[gameId] || iniFiles;\r\n    if (!!iniFiles)\r\n        iniFiles.filePaths = iniFiles.filePaths.map(path => path.replace('{gamepath}', discovery.path));\r\n    return iniFiles;\r\n}\r\nexports.getGameInis = getGameInis;\r\nfunction gameHasIniFiles(api) {\r\n    const state = api.store.getState();\r\n    const gameId = vortex_api_1.selectors.activeGameId(state);\r\n    if (!gameId)\r\n        return false;\r\n    if (gameSupport[gameId])\r\n        return true;\r\n    const game = vortex_api_1.util.getGame(gameId);\r\n    const ini = vortex_api_1.util.getSafe(game, ['iniFiles'], undefined);\r\n    return (!!ini);\r\n}\r\nexports.gameHasIniFiles = gameHasIniFiles;\r\nfunction isXboxPath(discoveryPath) {\r\n    const hasPathElement = (element) => discoveryPath.toLowerCase().includes(element);\r\n    return ['modifiablewindowsapps', '3275kfvn8vcwc'].find(hasPathElement) !== undefined;\r\n}\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getConfigFileData = exports.ensureFile = exports.stopWatchingFile = exports.watchIniFile = exports.saveIniContent = exports.getAllIniContent = exports.getSelectOptions = void 0;\r\nconst vortex_api_1 = require(\"vortex-api\");\r\nconst path = require(\"path\");\r\nlet watcher = undefined;\r\nlet watchPath;\r\nlet updater;\r\nfunction getSelectOptions(iniList) {\r\n    return iniList.map(ini => ({ value: ini, label: path.basename(ini) }));\r\n}\r\nexports.getSelectOptions = getSelectOptions;\r\nfunction getAllIniContent(iniList) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let result = {};\r\n        for (const ini of iniList) {\r\n            result[ini] = yield getConfigFileData(ini);\r\n        }\r\n        return Promise.resolve(result);\r\n    });\r\n}\r\nexports.getAllIniContent = getAllIniContent;\r\nfunction getConfigFileData(filePath) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const data = yield vortex_api_1.fs.readFileAsync(filePath, { encoding: 'utf8' });\r\n            return data;\r\n        }\r\n        catch (err) {\r\n            if (err.code !== 'ENOENT')\r\n                vortex_api_1.log('warn', 'Error loading config file data', { err, filePath });\r\n            return '';\r\n        }\r\n    });\r\n}\r\nexports.getConfigFileData = getConfigFileData;\r\nfunction ensureFile(path) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            yield vortex_api_1.fs.ensureFileAsync(path);\r\n        }\r\n        catch (err) {\r\n            vortex_api_1.log('error', 'Error ensuring INI file exists', { err, path });\r\n            throw err;\r\n        }\r\n    });\r\n}\r\nexports.ensureFile = ensureFile;\r\nfunction watchIniFile(path, updateFunc) {\r\n    watcher = vortex_api_1.fs.watch(path);\r\n    watchPath = path;\r\n    updater = updateFunc;\r\n    watcher.on(\"change\", (eventType, filename) => __awaiter(this, void 0, void 0, function* () {\r\n        if (eventType === 'rename') {\r\n            if (updater)\r\n                updater('');\r\n            return;\r\n        }\r\n        try {\r\n            const data = yield vortex_api_1.fs.readFileAsync(watchPath, { encoding: 'utf8' });\r\n            if (updater)\r\n                updater(data);\r\n        }\r\n        catch (err) {\r\n            vortex_api_1.log('error', 'Error reading changed file', { err, filename });\r\n        }\r\n    }));\r\n}\r\nexports.watchIniFile = watchIniFile;\r\nfunction stopWatchingFile(keepUpdater) {\r\n    if (watcher)\r\n        watcher.close();\r\n    if (!keepUpdater) {\r\n        updater = undefined;\r\n        watchPath = undefined;\r\n    }\r\n    ;\r\n}\r\nexports.stopWatchingFile = stopWatchingFile;\r\nfunction saveIniContent(path, data) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            stopWatchingFile(true);\r\n            yield vortex_api_1.fs.writeFileAsync(path, data, { encoding: 'utf8' });\r\n            watchIniFile(path, updater);\r\n        }\r\n        catch (err) {\r\n            vortex_api_1.log('error', 'Could not save INI file', { err, path });\r\n        }\r\n    });\r\n}\r\nexports.saveIniContent = saveIniContent;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = require(\"react\");\r\nconst vortex_api_1 = require(\"vortex-api\");\r\nconst react_bootstrap_1 = require(\"react-bootstrap\");\r\nconst react_select_1 = require(\"react-select\");\r\nconst react_i18next_1 = require(\"react-i18next\");\r\nconst react_redux_1 = require(\"react-redux\");\r\nconst gameSupport_1 = require(\"../util/gameSupport\");\r\nconst actions_1 = require(\"../actions/actions\");\r\nconst util_1 = require(\"../util/util\");\r\nfunction nop() {\r\n}\r\nclass IniEditor extends vortex_api_1.ComponentEx {\r\n    constructor(props) {\r\n        super(props);\r\n        this.deleteIniPath = (gameId, path) => {\r\n            const { deleteCustomIniPath, baseInis, customInis } = this.props;\r\n            const { activeIni } = this.state;\r\n            if (activeIni === path)\r\n                this.setActiveIni([...baseInis, ...customInis][0]);\r\n            deleteCustomIniPath(gameId, path);\r\n        };\r\n        this.browsePath = () => __awaiter(this, void 0, void 0, function* () {\r\n            const { t, baseInis, customInis } = this.props;\r\n            const allInis = [...baseInis, ...customInis].map(file => file.toLowerCase());\r\n            const newFile = yield this.context.api.selectFile({\r\n                title: 'Select configuration file',\r\n                filters: [\r\n                    { name: t('Config Files'), extensions: ['ini', 'txt', 'json', 'xml'] },\r\n                    { name: t('INI File'), extensions: ['ini'] },\r\n                    { name: t('Text File'), extensions: ['txt'] },\r\n                    { name: t('JSON File'), extensions: ['json'] },\r\n                    { name: t('XML File'), extensions: ['xml'] }\r\n                ],\r\n                defaultPath: vortex_api_1.util.getVortexPath('documents')\r\n            });\r\n            if (!newFile || allInis.includes(newFile.toLowerCase()))\r\n                return;\r\n            this.nextState.iniData[newFile] = yield util_1.getConfigFileData(newFile);\r\n            return this.props.addCustomIniPath(this.props.gameId, newFile);\r\n        });\r\n        this.initState({\r\n            bodyState: 'loading',\r\n            saving: false,\r\n        });\r\n    }\r\n    UNSAFE_componentWillReceiveProps(newProps) {\r\n        if (!this.props.visible && newProps.visible) {\r\n            this.preload();\r\n            this.nextState.bodyState = 'loading';\r\n        }\r\n        else if (!newProps.visible)\r\n            util_1.stopWatchingFile();\r\n    }\r\n    preload() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { baseInis, customInis } = this.props;\r\n            const allInis = [...baseInis, ...customInis];\r\n            try {\r\n                const iniData = yield util_1.getAllIniContent(allInis);\r\n                this.nextState.iniData = iniData;\r\n                this.setActiveIni(Object.keys(iniData)[0]);\r\n            }\r\n            catch (err) {\r\n                console.log(err);\r\n            }\r\n            this.nextState.bodyState = 'editor';\r\n            return Promise.resolve();\r\n        });\r\n    }\r\n    setActiveIni(filePath) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            util_1.stopWatchingFile();\r\n            if (this.state.iniData[filePath] === '')\r\n                yield util_1.ensureFile(filePath);\r\n            util_1.watchIniFile(filePath, (data) => {\r\n                this.nextState.iniData[filePath] = data;\r\n                this.nextState.editableData = data;\r\n            });\r\n            this.nextState.activeIni = filePath;\r\n            this.nextState.editableData = `${this.nextState.iniData[filePath]}`;\r\n            return Promise.resolve();\r\n        });\r\n    }\r\n    updateEditable(event) {\r\n        this.nextState.editableData = event.target.value;\r\n    }\r\n    render() {\r\n        const { t, onHide, visible, game } = this.props;\r\n        const { bodyState } = this.state;\r\n        return (React.createElement(vortex_api_1.Modal, { id: 'ini-editor', show: visible, onHide: nop },\r\n            React.createElement(vortex_api_1.Modal.Header, null,\r\n                React.createElement(\"h3\", null, t('{{game}} - INI Editor', { replace: { game: (game === null || game === void 0 ? void 0 : game.name) || '???' } }))),\r\n            React.createElement(vortex_api_1.Modal.Body, null, visible ? this.renderBody(bodyState) : null),\r\n            React.createElement(vortex_api_1.Modal.Footer, null,\r\n                React.createElement(react_bootstrap_1.Button, { onClick: onHide }, t('Close')))));\r\n    }\r\n    renderBody(bodyState) {\r\n        switch (bodyState) {\r\n            case 'loading': return this.renderLoading();\r\n            case 'editor': return this.renderEditor();\r\n            case 'settings': return this.renderSettings();\r\n            default: return null;\r\n        }\r\n    }\r\n    renderLoading() {\r\n        return (React.createElement(\"div\", { className: 'ini-editor-loading' },\r\n            React.createElement(vortex_api_1.Spinner, { className: 'ini-editor-loading-spinner' })));\r\n    }\r\n    renderEditor() {\r\n        const { baseInis, customInis, t } = this.props;\r\n        const { activeIni, iniData, editableData, saving } = this.state;\r\n        const allInis = [...baseInis, ...customInis];\r\n        const options = util_1.getSelectOptions(allInis);\r\n        const data = iniData[activeIni];\r\n        const blockSave = data == editableData;\r\n        return (React.createElement(\"div\", { className: 'ini-editor-edit' },\r\n            React.createElement(\"div\", { className: 'ini-editor-edit-controls' },\r\n                React.createElement(\"span\", { className: 'selector' },\r\n                    React.createElement(react_select_1.default, { options: options, value: activeIni, onChange: (newValue) => this.setActiveIni(newValue.value), clearable: false })),\r\n                React.createElement(\"span\", null,\r\n                    React.createElement(react_bootstrap_1.Button, { onClick: () => vortex_api_1.util.opn(activeIni).catch(() => undefined) },\r\n                        React.createElement(vortex_api_1.Icon, { name: 'changelog' }),\r\n                        \" \",\r\n                        t('View')),\r\n                    React.createElement(react_bootstrap_1.Button, { onClick: () => this.nextState.bodyState = 'settings' },\r\n                        React.createElement(vortex_api_1.Icon, { name: 'settings' }),\r\n                        \" \",\r\n                        t('Settings')))),\r\n            React.createElement(\"textarea\", { spellCheck: false, className: 'ini-editor-textarea', value: editableData, onChange: this.updateEditable.bind(this) }),\r\n            React.createElement(react_bootstrap_1.Button, { disabled: blockSave || saving, className: 'wide-button', onClick: this.saveIniEdits.bind(this) },\r\n                React.createElement(vortex_api_1.Icon, { name: 'savegame' }),\r\n                \" \",\r\n                t('Save'))));\r\n    }\r\n    saveIniEdits() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { activeIni, editableData } = this.state;\r\n            const { setDeploymentRequired, gameId } = this.props;\r\n            this.nextState.saving = true;\r\n            try {\r\n                yield util_1.saveIniContent(activeIni, editableData);\r\n                this.nextState.iniData[activeIni] = editableData;\r\n                setDeploymentRequired(gameId, true);\r\n            }\r\n            catch (err) {\r\n                this.nextState.error = `Unable to save INI: ${err.message}`;\r\n            }\r\n            this.nextState.saving = false;\r\n        });\r\n    }\r\n    renderSettings() {\r\n        const { t, customInis, baseInis, deleteCustomIniPath, gameId, game } = this.props;\r\n        const baseNames = util_1.getSelectOptions(baseInis);\r\n        const customNames = util_1.getSelectOptions(customInis);\r\n        const gameName = game.name;\r\n        return (React.createElement(\"div\", { className: 'ini-editor-settings' },\r\n            t('Using the controls below, you can manage the files that appear in the drop-down selector for {{gameName}}. Hover you cursor over the file name to see the full path.', { replace: { gameName } }),\r\n            baseInis ?\r\n                React.createElement(\"div\", null,\r\n                    React.createElement(\"h4\", null, t('Base INIs')),\r\n                    React.createElement(\"ul\", null, baseNames.map(ini => (React.createElement(\"li\", { title: ini.value }, ini.label))))) : undefined,\r\n            React.createElement(\"div\", null,\r\n                React.createElement(\"h4\", null, t('Custom INIs')),\r\n                React.createElement(\"ul\", null,\r\n                    customInis ? customNames.map(ini => (React.createElement(\"li\", { title: ini.value },\r\n                        ini.label,\r\n                        \" \",\r\n                        React.createElement(react_bootstrap_1.Button, { onClick: () => this.deleteIniPath(gameId, ini.value) },\r\n                            React.createElement(vortex_api_1.Icon, { name: 'toggle-uninstalled' }))))) : undefined,\r\n                    React.createElement(\"li\", null,\r\n                        React.createElement(react_bootstrap_1.Button, { onClick: this.browsePath },\r\n                            \" \",\r\n                            React.createElement(vortex_api_1.Icon, { name: 'add' }),\r\n                            \" \",\r\n                            t('Add'),\r\n                            \" \")))),\r\n            t('Valid files must have a .TXT, .JSON, .XML or .INI file extension.'),\r\n            React.createElement(\"br\", null),\r\n            React.createElement(react_bootstrap_1.Button, { onClick: () => this.nextState.bodyState = 'editor' }, \"Back\")));\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    const gameId = vortex_api_1.selectors.activeGameId(state);\r\n    const game = vortex_api_1.util.getGame(gameId);\r\n    const gameInis = gameSupport_1.getGameInis(gameId, state);\r\n    const customInis = vortex_api_1.util.getSafe(state, ['settings', 'ini-editor', gameId], undefined);\r\n    return {\r\n        gameId,\r\n        game,\r\n        baseInis: (gameInis === null || gameInis === void 0 ? void 0 : gameInis.filePaths) || [],\r\n        customInis: (customInis === null || customInis === void 0 ? void 0 : customInis.filePaths) || [],\r\n    };\r\n}\r\nfunction dispatchStateToProps(dispatch) {\r\n    return {\r\n        setDeploymentRequired: (gameId, necessary) => dispatch(vortex_api_1.actions.setDeploymentNecessary(gameId, necessary)),\r\n        addCustomIniPath: (gameId, path) => dispatch(actions_1.addCustomConfigPath(gameId, path)),\r\n        deleteCustomIniPath: (gameId, path) => dispatch(actions_1.deleteCustomConfigPath(gameId, path))\r\n    };\r\n}\r\nexports.default = react_i18next_1.withTranslation(['ini-editor'])(react_redux_1.connect(mapStateToProps, dispatchStateToProps)(IniEditor));\r\n","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-bootstrap\");","module.exports = require(\"react-i18next\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-select\");","module.exports = require(\"redux-act\");","module.exports = require(\"vortex-api\");"],"sourceRoot":""}